(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-copy"],{"0821":function(t,i,e){var n=e("c86c");i=n(!1),i.push([t.i,".loading-container[data-v-610b468f]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.5);z-index:9999}.loading-wrapper[data-v-610b468f]{display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:180px;background-color:rgba(0,0,0,.5);border-radius:10px;padding:20px}.loading-video[data-v-610b468f]{width:100px;height:85px}.loading-text[data-v-610b468f]{color:#fff;margin-top:15px;font-size:16px}",""]),t.exports=i},1198:function(t,i,e){"use strict";e.r(i);var n=e("982d"),o=e("d9a6");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("143e");var c=e("828b"),a=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"4680c0c6",null,!1,n["a"],void 0);i["default"]=a.exports},"143e":function(t,i,e){"use strict";var n=e("1889"),o=e.n(n);o.a},1889:function(t,i,e){var n=e("ac7c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("967d").default;o("3c1e796d",n,!0,{sourceMap:!1,shadowMode:!1})},"19bc":function(t,i,e){"use strict";e.r(i);var n=e("2c99"),o=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a},"2c99":function(t,i,e){"use strict";e("6a54"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={props:{text:{type:String,default:"Loading..."}},methods:{playVideo:function(){this.$refs.video.play()}}};i.default=n},"5e39":function(t,i,e){"use strict";var n=e("c7d9"),o=e.n(n);o.a},"87c3":function(t,i,e){"use strict";e.r(i);var n=e("d095"),o=e("19bc");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("5e39");var c=e("828b"),a=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"610b468f",null,!1,n["a"],void 0);i["default"]=a.exports},"982d":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var n={uniIcons:e("00f9").default,uniPopup:e("3182").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"pages copy"},[e("v-uni-view",{staticClass:"nav-bar-header"},[e("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.back.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"nav-bar-title"},[t._v("口播文案")]),e("v-uni-view",{staticClass:"regenerate",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.generate.apply(void 0,arguments)}}},[t._v("重新生成")])],1),e("v-uni-view",{staticClass:"copy-content"},[e("v-uni-input",{staticStyle:{height:"23px","line-height":"23px",width:"100%","text-align":"center",color:"#ffffff"},attrs:{type:"text"},model:{value:t.news.title,callback:function(i){t.$set(t.news,"title",i)},expression:"news.title"}}),e("v-uni-view",{staticClass:"copy-card"},[e("v-uni-textarea",{staticClass:"copy-script",attrs:{type:"text","placeholder-style":"color:#9A9A9A",placeholder:"请输入文案内容",maxlength:-1},model:{value:t.script,callback:function(i){t.script=i},expression:"script"}}),e("v-uni-view",{staticStyle:{height:"40px",display:"flex","align-items":"end"}},[e("v-uni-view",{staticStyle:{"margin-left":"18px",width:"calc(100% - 36px)",color:"#d3d3d3",display:"flex","justify-content":"center","align-items":"center"}},[t.scriptList.length>1?[e("uni-icons",{attrs:{type:"left",size:"18",color:"#d3d3d3"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.prevScript.apply(void 0,arguments)}}}),e("v-uni-view",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t.scriptIndex))]),e("v-uni-view",[t._v("/")]),e("v-uni-view",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t.scriptList.length))]),e("uni-icons",{attrs:{type:"right",size:"18",color:"#d3d3d3"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.nextScript.apply(void 0,arguments)}}})]:t._e()],2),e("v-uni-image",{staticClass:"copy-icon",attrs:{src:"/static/copy_icon.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.copy.apply(void 0,arguments)}}})],1)],1)],1),e("v-uni-view",{staticClass:"warning"},[t._v("内容由DeepSeek R1生成，禁止从事违法活动")]),e("v-uni-view",{staticClass:"copy-setting"},[e("v-uni-view",{staticClass:"setting-item"},[e("v-uni-view",{staticStyle:{color:"#E5E5E5"}},[t._v("声音选择")]),e("v-uni-view",{staticClass:"setting-name",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$refs.voicePopup.open.apply(void 0,arguments)}}},[t._v(t._s(t.voice.name))]),e("uni-icons",{attrs:{type:"right",size:"20",color:"#E5E5E5;"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$refs.voicePopup.open.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"setting-item"},[e("v-uni-view",{staticStyle:{color:"#E5E5E5"}},[t._v("形象选择")]),e("v-uni-view",{staticClass:"setting-name",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$refs.figurePopup.open.apply(void 0,arguments)}}},[t._v(t._s(t.figure.name))]),e("uni-icons",{attrs:{type:"right",size:"20",color:"#E5E5E5;"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$refs.figurePopup.open.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticStyle:{position:"relative",width:"250px",margin:"0 auto"}},[e("v-uni-button",{staticClass:"copy-btn",attrs:{disabled:t.disabled},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.generateVideo.apply(void 0,arguments)}}},[t._v("口播视频生成")])],1),e("uni-popup",{ref:"voicePopup",attrs:{type:"bottom","background-color":"#292929",borderRadius:"12px 12px 0 0"},on:{maskClick:function(i){arguments[0]=i=t.$handleEvent(i),t.closeVoicePopup.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"popup-content"},[e("v-uni-view",{staticClass:"popup-title"},[e("v-uni-view",{staticStyle:{color:"#ffffff","font-size":"16px"}},[t._v("声音")])],1),e("v-uni-view",{staticClass:"voice-content"},t._l(t.voices,(function(i,n){return e("v-uni-view",{key:i.id,staticStyle:{flex:"none","text-align":"center"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectedVoice=i}}},[e("v-uni-view",{staticClass:"voice-item",style:{border:i.id===t.selectedVoice.id?"2px solid #e99d42":"",backgroundImage:"url("+i.avatar+")"}},[t.testAudioIndex!==n?e("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"20",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewAudio(i,n)}}},[t._v(t._s(""))]):e("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"20",color:"#ffffff"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.stopPreviewAudio.apply(void 0,arguments)}}},[t._v(t._s(""))])],1),e("v-uni-view",{staticStyle:{"margin-top":"10px","font-size":"14px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",width:"80px"},style:{color:i.id===t.selectedVoice.id?"#e99d42":"#ffffff"}},[t._v(t._s(i.name))])],1)})),1),e("v-uni-button",{staticClass:"copy-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.voiceSure.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),e("uni-popup",{ref:"figurePopup",attrs:{type:"bottom","background-color":"#292929",borderRadius:"12px 12px 0 0"}},[e("v-uni-view",{staticClass:"popup-content"},[e("v-uni-view",{staticClass:"popup-title"},[e("v-uni-view",{staticStyle:{color:"#ffffff","font-size":"16px"}},[t._v("形象")])],1),e("v-uni-view",{staticClass:"figure-content"},t._l(t.figures,(function(i){return e("v-uni-view",{key:i.id,staticStyle:{flex:"none","text-align":"center"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectedFigure=i}}},[e("v-uni-image",{staticClass:"figure-item",style:{border:i.id===t.selectedFigure.id?"2px solid #e99d42":""},attrs:{src:i.picture,mode:"aspectFill"}}),e("v-uni-view",{staticStyle:{"margin-top":"10px","font-size":"14px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",width:"100px"},style:{color:i.id===t.selectedFigure.id?"#e99d42":"#ffffff"}},[t._v(t._s(i.name))])],1)})),1),e("v-uni-button",{staticClass:"copy-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.figureSure.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),t.isLoading?e("loading-video",{ref:"loadingVideo",attrs:{text:"口播文案生成中..."}}):t._e()],1)},s=[]},a559:function(t,i,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("8f71"),e("bf0f"),e("c223"),e("e966");var o=n(e("2634")),s=n(e("2fdc")),c=n(e("87c3")),a={name:"Detail",components:{LoadingVideo:c.default},data:function(){return{userId:"",news:{},word:0,styleId:"",isEdit:!1,focus:!1,script:"",scriptIndex:0,scriptList:[],voices:[],voice:{},selectedVoice:{},figures:[],figure:{},selectedFigure:{},testAudioContext:null,testAudioIndex:null,isLoading:!1,fileInfo:{},type:"",productInfo:"",userInfo:{},disabled:!1}},mounted:function(){this.userId=uni.getStorageSync("userId"),this.news=uni.getStorageSync("news"),this.word=uni.getStorageSync("wordSetting"),this.styleId=uni.getStorageSync("styleId"),this.productInfo=uni.getStorageSync("productInfo"),this.queryHistoryCopy(),this.queryVoices(),this.queryFigures(),this.queryUserInfo()},methods:{queryUserInfo:function(){var t=this;this.$http.get("/user/query",{user_id:this.userId}).then(function(){var i=(0,s.default)((0,o.default)().mark((function i(e){return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:"success"===e.status&&(t.userInfo=e.data);case 1:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())},queryFigures:function(){var t=this;this.$http.get("/figure/query/user",{user_id:this.userId}).then((function(i){"success"===i.status?(t.figures=i.data.filter((function(t){return"success"===t.status})),t.figures.length>0&&(t.figure=t.figures[0],t.selectedFigure=t.figures[0])):t.$tip.confirm(i.message,!1)}))},queryVoices:function(){var t=this;this.$http.get("/timbres/query/user",{user_id:this.userId}).then((function(i){"success"===i.status?(t.voices=i.data.filter((function(t){return"success"===t.status})),t.voices.length>0&&(t.voice=t.voices[0],t.selectedVoice=t.voices[0])):t.$tip.confirm(i.message,!1)}))},generate:function(){var t=this,i={user_id:this.userId,style_id:this.styleId,news_details:this.news.details,news_id:this.news.id,count:this.word,productInfo:this.productInfo};this.isLoading=!0,this.$nextTick((function(){t.$refs.loadingVideo.playVideo()})),this.$http.post("/copywriting/voice",i,3e5).then((function(i){"success"===i.status?(t.queryHistoryCopy(),t.isLoading=!1):(t.isLoading=!1,t.$tip.confirm(i.message,!1))}))},generateVideo:function(){var t=this;""!==this.news.title?this.userInfo.point<20?this.$tip.confirm("积分余额须大于20方可使用本服务，当前剩余积分".concat(this.userInfo.point),!1):this.$tip.confirm("确定生成视频？",!0).then((function(i){if("success"===i){t.disabled=!0;var e={text:t.script,user_id:t.userId,voice_id:t.voice.voice_id,video_id:t.figure.video_id,filename:t.news.title};t.$http.post("/figure/generate_video",e).then((function(i){"success"===i.status?t.$tip.confirm("已创建口播视频生成任务\n《".concat(t.news.title,".mp4》"),!1).then((function(){t.disabled=!1,uni.switchTab({url:"/pages/template/index"})})):t.$tip.confirm("创建口播视频生成任务\n《".concat(t.news.title,".mp4》失败,").concat(i.message),!1).then((function(){t.disabled=!1}))}))}})):this.$tip.confirm("请输入标题",!1)},queryHistoryCopy:function(){var t=this,i={user_id:uni.getStorageSync("userId"),news_id:uni.getStorageSync("news").id};this.$http.get("/copywriting_history/query",i).then((function(i){"success"===i.status&&(t.scriptList=i.data,uni.getStorageSync("scriptIndex")?(t.scriptIndex=parseInt(uni.getStorageSync("scriptIndex"))+1,setTimeout((function(){uni.removeStorageSync("scriptIndex")}))):t.scriptIndex=1,t.script=t.scriptList[t.scriptIndex-1].copywriting)}))},previewAudio:function(t,i){var e=this;this.testAudioContext&&this.stopPreviewAudio(),this.testAudioContext=uni.createInnerAudioContext(),this.testAudioContext.src=t.filepath,this.testAudioContext.autoplay=!0,this.testAudioContext.play(),this.testAudioContext.onPlay((function(){e.testAudioIndex=i})),this.testAudioContext.onEnded((function(){e.stopPreviewAudio()}))},stopPreviewAudio:function(){this.testAudioContext.pause(),this.testAudioContext.destroy(),this.testAudioContext=null,this.testAudioIndex=null},voiceSure:function(){this.testAudioContext&&this.stopPreviewAudio(),this.voice=this.selectedVoice,this.$refs.voicePopup.close()},closeVoicePopup:function(){this.testAudioContext&&this.stopPreviewAudio(),this.$refs.voicePopup.close()},figureSure:function(){this.figure=this.selectedFigure,this.$refs.figurePopup.close()},copy:function(){var t=this;uni.setClipboardData({data:t.script,showToast:!1,success:function(){t.$tip.confirm("复制成功",!1)}})},prevScript:function(){this.scriptIndex>1?(this.script=this.scriptList[this.scriptIndex-2].copywriting,this.scriptIndex=this.scriptIndex-1):this.$tip.confirm("已经是第一条口播文案了",!1)},nextScript:function(){this.scriptIndex<this.scriptList.length?(this.script=this.scriptList[this.scriptIndex].copywriting,this.scriptIndex=this.scriptIndex+1):this.$tip.confirm("已经是最后一条口播文案了",!1)},back:function(){uni.hideKeyboard(),setTimeout((function(){uni.redirectTo({url:"/pages/home/detail"})}),100)},edit:function(){this.focus=!0,this.isEdit=!0}}};i.default=a},ac7c:function(t,i,e){var n=e("c86c");i=n(!1),i.push([t.i,"@font-face{font-family:CustomFont;src:url(/static/iconfont.ttf)}.copy[data-v-4680c0c6]{height:100vh}.regenerate[data-v-4680c0c6]{position:absolute;right:5px;color:#fff}.copy-content[data-v-4680c0c6]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100% - 230px)}.copy-title[data-v-4680c0c6]{height:23px;line-height:23px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.copy-card[data-v-4680c0c6]{width:100%;height:calc(100% - 30px);margin-top:10px;border-radius:20px;background-color:#303030;padding:14px;box-sizing:border-box}.copy-script[data-v-4680c0c6]{height:calc(100% - 40px);width:100%;overflow-y:auto;font-size:14px;color:#9a9a9a}.copy-icon[data-v-4680c0c6]{width:18px;height:18px;margin-top:5px;margin-right:3px}.warning[data-v-4680c0c6]{color:#9a9a9a;font-size:14px;margin:10px 0}.copy-setting[data-v-4680c0c6]{margin-bottom:10px;margin-left:10px}.setting-item[data-v-4680c0c6]{color:#fff;font-size:16px;height:35px;line-height:35px;display:flex;align-items:center}.setting-name[data-v-4680c0c6]{flex:1;overflow-x:auto;white-space:nowrap;margin-right:20px;text-align:right;color:#e5e5e5}.copy-btn[data-v-4680c0c6]{background-color:#e99d42;width:250px;margin:0 auto;font-size:16px;border-radius:15px;color:#101010}.word-count[data-v-4680c0c6]{position:absolute;top:0;right:20px;height:40px;display:flex;align-items:center}.popup-content[data-v-4680c0c6]{background-color:#292929;border-top-left-radius:12px;border-top-right-radius:12px;padding:20px}.popup-title[data-v-4680c0c6]{display:flex;align-items:center;justify-content:center;position:relative}.popup-close[data-v-4680c0c6]{position:absolute;top:5px;right:0;color:#fff}.voice-content[data-v-4680c0c6]{width:100%;height:220px;display:flex;gap:20px;overflow-x:auto;flex-wrap:nowrap;align-items:center}.voice-item[data-v-4680c0c6]{width:80px;height:80px;border-radius:50%;position:relative;background-size:cover}.off-on[data-v-4680c0c6]{height:20px;width:20px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.figure-content[data-v-4680c0c6]{width:100%;height:250px;display:flex;gap:20px;overflow-x:auto;flex-wrap:nowrap;align-items:center}.figure-item[data-v-4680c0c6]{width:90px;height:120px;border-radius:12px}",""]),t.exports=i},c7d9:function(t,i,e){var n=e("0821");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("967d").default;o("8200160e",n,!0,{sourceMap:!1,shadowMode:!1})},d095:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){}));var n=function(){var t=this.$createElement,i=this._self._c||t;return i("v-uni-view",{staticClass:"loading-container"},[i("v-uni-view",{staticClass:"loading-wrapper"},[i("v-uni-video",{ref:"video",staticClass:"loading-video",attrs:{src:"/static/loading.mp4",playsinline:!0,"webkit-playsinline":!0,loop:!0,muted:!0,"object-fit":"cover",controls:!1,"show-center-play-btn":!1}}),i("v-uni-view",{staticClass:"loading-text"},[this._v(this._s(this.text))])],1)],1)},o=[]},d9a6:function(t,i,e){"use strict";e.r(i);var n=e("a559"),o=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a}}]);