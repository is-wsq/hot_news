(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-voucher"],{"2fee":function(e,t,i){var n=i("5c3c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("6164b10d",n,!0,{sourceMap:!1,shadowMode:!1})},"320b":function(e,t,i){"use strict";i.r(t);var n=i("3ace"),a=i("a3cf");for(var c in a)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("e328");var o=i("828b"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"90d95364",null,!1,n["a"],void 0);t["default"]=r.exports},"3ace":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("00f9").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"pages voucher"},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[e._v("充值服务")]),i("v-uni-view",{staticClass:"integralRecharge",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/user/integral")}}},[e._v("积分充值")])],1),i("v-uni-view",{staticClass:"voucher-content"},[i("v-uni-view",{staticClass:"voucher-list"},e._l(e.voucherInfos,(function(t){return i("v-uni-view",{key:t.id,staticClass:"voucher-item",class:{"item-active":t.id===e.packageId},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.changePackage(t)}}},[i("v-uni-view",{staticClass:"voucher-item-top"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"voucher-item-center"},[e._v("￥"+e._s(t.price))]),i("v-uni-view",{staticClass:"voucher-item-bottom"},[e._v(e._s(t.unit_price+"/100积分"))])],1)})),1),i("v-uni-view",{staticClass:"vip-interest"},[i("v-uni-view",{staticClass:"vip-interest-title"},[e._v("会员权益")]),e.voucherInfos.length>0?i("v-uni-view",{staticClass:"vip-interest-list"},[i("v-uni-view",{staticClass:"vip-interest-item"},[i("v-uni-image",{staticClass:"vip-interest-img",attrs:{src:"/static/interest-item.png"}}),i("v-uni-view",{staticStyle:{"margin-left":"7px"}},[e._v(e._s("定制版数字人形象×"+e.selectedVoucher.figure))])],1),i("v-uni-view",{staticClass:"vip-interest-item"},[i("v-uni-image",{staticClass:"vip-interest-img",attrs:{src:"/static/interest-item.png"}}),i("v-uni-view",{staticStyle:{"margin-left":"7px"}},[e._v(e._s("定制版声音克隆×"+e.selectedVoucher.timbre))])],1),i("v-uni-view",{staticClass:"vip-interest-item"},[i("v-uni-image",{staticClass:"vip-interest-img",attrs:{src:"/static/interest-item.png"}}),i("v-uni-view",{staticStyle:{"margin-left":"7px"}},[e._v(e._s("赠送"+e.selectedVoucher.points+"积分"))])],1),i("v-uni-view",{staticClass:"vip-interest-item"},[i("v-uni-image",{staticClass:"vip-interest-img",attrs:{src:"/static/interest-item.png"}}),i("v-uni-view",{staticStyle:{"margin-left":"7px"}},[e._v(e._s("后续积分购买"+10*e.selectedVoucher.discount+"折优惠"))])],1)],1):e._e()],1)],1),i("v-uni-button",{staticClass:"buy-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getWeChatCode.apply(void 0,arguments)}}},[e._v("立即购买")]),i("v-uni-view",{staticClass:"voucher-footer"},[e._v("购买即同意"),i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/agreement/membership?back=voucher")}}},[e._v("《付费服务协议》")]),e._v("、"),i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/agreement/user?back=voucher")}}},[e._v("《用户协议》")]),e._v("与"),i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/agreement/privacy?back=voucher")}}},[e._v("《隐私条款》")])],1)],1)},c=[]},"5c3c":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".voucher[data-v-90d95364]{height:100vh;overflow-y:auto}.integralRecharge[data-v-90d95364]{position:absolute;right:5px;color:#fff}.voucher-content[data-v-90d95364]{height:calc(100% - 180px);min-height:450px;border-radius:15px;background:linear-gradient(180deg,rgba(233,157,66,.2),rgba(233,157,157,0));box-shadow:2px 4px 10px rgba(0,0,0,.4);padding-top:20px;box-sizing:border-box}.voucher-list[data-v-90d95364]{display:flex;justify-content:space-between;gap:10px;padding:0 10px;box-sizing:border-box}.voucher-item[data-v-90d95364]{flex:1;max-width:108px;height:128px;border-radius:15px;background-color:hsla(0,0%,100%,.25);color:#fff;display:flex;flex-direction:column;align-items:center}.item-active[data-v-90d95364]{background-color:rgba(225,197,156,.93)!important;color:#96750e!important}.voucher-item-top[data-v-90d95364]{margin-top:15px;font-size:16px}.voucher-item-center[data-v-90d95364]{margin-top:12px;font-size:20px;font-weight:700;color:#fff}.voucher-item-bottom[data-v-90d95364]{margin-top:20px;font-size:13px}.vip-interest[data-v-90d95364]{height:calc(100% - 150px);min-height:280px;margin:20px 20px 0;border-radius:15px;background-image:url(/static/voucher-bg-200kb.jpg);background-position:100% 100%;background-repeat:no-repeat;background-size:cover;padding:20px 30px 0;box-sizing:border-box}.vip-interest-title[data-v-90d95364]{text-align:right;margin-top:5px;color:#fff;font-size:20px}.vip-interest-list[data-v-90d95364]{margin-left:15px;margin-top:10px;color:#fff;font-size:16px}.vip-interest-item[data-v-90d95364]{display:flex;align-items:center;line-height:50px}.vip-interest-img[data-v-90d95364]{width:25px;height:25px}.buy-btn[data-v-90d95364]{background-color:#e99d42;width:255px;height:35px;line-height:35px;margin:25px auto 0;font-size:14px;border-radius:15px;color:#101010}.voucher-footer[data-v-90d95364]{color:#9a9a9a;font-size:13px;margin-top:20px;display:flex;justify-content:center}",""]),e.exports=t},a3cf:function(e,t,i){"use strict";i.r(t);var n=i("a51a"),a=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},a51a:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("5c47"),i("0506"),i("c223"),i("a1c1"),i("23f4"),i("7d2f"),i("9c4e"),i("ab80"),i("d4b5");var n={data:function(){return{safeAreaHeight:uni.getSystemInfoSync().safeArea.height,voucherInfos:[],selectedVoucher:{},packageId:null}},created:function(){this.queryInfo()},onLoad:function(){this.checkWeChatCode()},methods:{isWeChat:function(){return/MicroMessenger/i.test(navigator.userAgent)},getWeChatCode:function(){if(this.isWeChat()){var e=encodeURIComponent(window.location.href);window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat("wx48d2e02bf10f849c","&redirect_uri=").concat(e,"&response_type=code&scope=").concat("snsapi_base","&state=").concat("STATE123","#wechat_redirect")}else this.$tip.confirm("需要在微信环境下才能使用",!1)},getUrlCode:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},checkWeChatCode:function(){var e=this,t=e.getUrlCode("code");e.$tip.confirm(t+"\n"+uni.getStorageSync("userId")+"\n"+e.selectedVoucher.id+"\n"+e.packageId,!1).then((function(){if(t){var i={user_id:uni.getStorageSync("userId"),code:t,package_id:e.selectedVoucher.id};e.$http.post("/package/buy",i).then((function(t){if("success"===t.status){var i=window.location.origin+window.location.pathname;window.history.replaceState({},"",i),e.$tip.confirm(JSON.stringify(t.data),!1).then((function(){window.WeixinJSBridge.invoke("getBrandWCPayRequest",t.data,(function(t){e.$tip.confirm(JSON.stringify(t),!1).then((function(){"get_brand_wcpay_request:ok"===t.err_msg?e.$tip.confirm("支付成功",!1):"get_brand_wcpay_request:cancel"===t.err_msg?e.$tip.confirm("已取消支付",!1):e.$tip.confirm("支付失败",!1)}))}))}))}else e.$tip.confirm(t.message,!1)}))}}))},queryInfo:function(){var e=this,t={user_id:uni.getStorageSync("userId"),type:"member"};this.$http.get("/package/query/user",t).then((function(t){"success"===t.status?(e.voucherInfos=t.data,e.selectedVoucher=t.data[0]||{},e.packageId=e.selectedVoucher.id||null,console.log(e.packageId)):e.$tip.confirm(t.message,!1)}))},changePackage:function(e){this.selectedVoucher=e,this.packageId=e.id},goto:function(e){uni.redirectTo({url:e})},back:function(){uni.switchTab({url:"/pages/user/index"})}}};t.default=n},e328:function(e,t,i){"use strict";var n=i("2fee"),a=i.n(n);a.a}}]);