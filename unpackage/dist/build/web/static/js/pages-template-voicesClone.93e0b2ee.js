(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-voicesClone"],{"11a0":function(t,e,i){var n=i("55c8");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("967d").default;r("16cb64aa",n,!0,{sourceMap:!1,shadowMode:!1})},2634:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.default=function(){return t};var t={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(t,e,i){t[e]=i.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(O){l=function(t,e,i){return t[e]=i}}function d(t,e,i,n){var r=e&&e.prototype instanceof v?e:v,a=Object.create(r.prototype),c=new I(n||[]);return o(a,"_invoke",{value:C(t,i,c)}),a}function f(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(O){return{type:"throw",arg:O}}}t.wrap=d;var p={};function v(){}function h(){}function g(){}var m={};l(m,c,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(L([])));x&&x!==i&&r.call(x,c)&&(m=x);var b=g.prototype=v.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var i;o(this,"_invoke",{value:function(o,a){function c(){return new e((function(i,c){(function i(o,a,c,s){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==(0,n.default)(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,c,s)}),(function(t){i("throw",t,c,s)})):e.resolve(d).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,s)}))}s(u.arg)})(o,a,i,c)}))}return i=i?i.then(c,c):c()}})}function C(t,e,i){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return F()}for(i.method=r,i.arg=o;;){var a=i.delegate;if(a){var c=k(a,i);if(c){if(c===p)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var s=f(t,e,i);if("normal"===s.type){if(n=i.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(n="completed",i.method="throw",i.arg=s.arg)}}}function k(t,e){var i=e.method,n=t.iterator[i];if(void 0===n)return e.delegate=null,"throw"===i&&t.iterator["return"]&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),p;var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:F}}function F(){return{value:void 0,done:!0}}return h.prototype=g,o(b,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),l(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var a=new _(d(e,i,n,r),o);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return a.type="throw",a.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;E(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:L(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},t},i("6a54"),i("01a2"),i("e39c"),i("bf0f"),i("844d"),i("18f7"),i("de6c"),i("3872e"),i("4e9b"),i("114e"),i("c240"),i("926e"),i("7a76"),i("c9b5"),i("aa9c"),i("2797"),i("8a8d"),i("dc69"),i("f7a5");var n=function(t){return t&&t.__esModule?t:{default:t}}(i("fcf3"))},"2fdc":function(t,e,i){"use strict";function n(t,e,i,n,r,o,a){try{var c=t[o](a),s=c.value}catch(u){return void i(u)}c.done?e(s):Promise.resolve(s).then(n,r)}i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){var e=this,i=arguments;return new Promise((function(r,o){var a=t.apply(e,i);function c(t){n(a,r,o,c,s,"next",t)}function s(t){n(a,r,o,c,s,"throw",t)}c(void 0)}))}},i("bf0f")},"55c8":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,"@font-face{font-family:CustomFont;src:url(/static/iconfont.ttf)}.voicesClone[data-v-1fd10e32]{height:100vh;color:#fff}.voices-list[data-v-1fd10e32]{position:absolute;right:5px;color:#fff}.voice-content[data-v-1fd10e32]{height:calc(100% - 150px);overflow-y:auto}.template-img[data-v-1fd10e32]{background-image:url(/static/img/microphone.png);border-radius:10px;width:180px;height:240px;margin-right:5px;background-size:cover;background-repeat:no-repeat;background-position:50%}.clone-case[data-v-1fd10e32]{flex:1;border-radius:10px;height:82px;background-image:url(/static/img/case.png);background-size:cover;background-repeat:no-repeat;position:relative}.clone-case-title[data-v-1fd10e32]{position:absolute;bottom:5px;left:5px;color:#fff;font-size:14px}.clone-case-btn[data-v-1fd10e32]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:45px;height:45px;border-radius:50%;background-color:rgba(16,16,16,.15);display:flex;justify-content:center;align-items:center}.voice-tutorial[data-v-1fd10e32]{height:150px;border-radius:10px;background-image:url(/static/img/microphone_copy.png);background-size:cover;background-repeat:no-repeat;position:relative}.voice-tutorial-btn[data-v-1fd10e32]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:60px;height:60px;border-radius:50%;background-color:rgba(16,16,16,.15);display:flex;justify-content:center;align-items:center}.transcribe[data-v-1fd10e32]{flex:1;height:55px;line-height:55px;border-radius:10px}.upload[data-v-1fd10e32]{flex:1;height:55px;line-height:55px;background-color:#e99d42;color:#fff;border-radius:10px}.popup-content[data-v-1fd10e32]{background-color:#292929;border-top-left-radius:12px;border-top-right-radius:12px;padding:10px;height:500px}.popup-title[data-v-1fd10e32]{display:flex;align-items:center;justify-content:center;position:relative}.recorder-content[data-v-1fd10e32]{position:relative;height:100px}.circle-canvas[data-v-1fd10e32]{width:100px;height:100px;margin:20px auto 0}.microphone-icon[data-v-1fd10e32]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.timer[data-v-1fd10e32]{margin-top:10px;text-align:center;font-size:14px;color:#666}.recorder-btn[data-v-1fd10e32]{flex:1;height:45px;line-height:45px;font-size:14px;border-radius:8px;color:#101010}.text[data-v-1fd10e32]{font-size:16px;color:#888;display:flex;flex-wrap:wrap;text-align:center}.word[data-v-1fd10e32]{opacity:1;color:#888}.word.active[data-v-1fd10e32]{-webkit-animation:highlight-data-v-1fd10e32 .5s forwards;animation:highlight-data-v-1fd10e32 .5s forwards}@-webkit-keyframes highlight-data-v-1fd10e32{from{color:#888}to{color:#e99d42}}@keyframes highlight-data-v-1fd10e32{from{color:#888}to{color:#e99d42}}",""]),t.exports=e},6219:function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("00f9").default,uniPopup:i("3182").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pages voicesClone"},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[t._v("音色克隆")]),i("v-uni-view",{staticClass:"voices-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoVoices.apply(void 0,arguments)}}},[t._v("音色列表")])],1),i("v-uni-view",{staticClass:"voice-content"},[i("v-uni-view",{staticStyle:{"margin-bottom":"15px"}},[t._v("正确示例")]),i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticClass:"template-img"}),i("v-uni-view",{staticClass:"template-requires"},t._l(t.requires,(function(e,n){return i("v-uni-view",{key:n,staticStyle:{height:"40px",display:"flex","align-items":"center"}},[i("uni-icons",{staticStyle:{margin:"0 5px"},attrs:{type:"checkbox-filled",size:"22",color:"#77C285"}}),i("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e))])],1)})),1)],1),i("v-uni-view",{staticStyle:{margin:"15px 0"}},[t._v("克隆案例")]),i("v-uni-view",{staticStyle:{display:"flex",gap:"30px"}},[i("v-uni-view",{staticClass:"clone-case"},[i("v-uni-view",{staticClass:"clone-case-title"},[t._v("原声")]),i("v-uni-view",{staticClass:"clone-case-btn"},[0!==t.playIndex?i("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(0)}}},[t._v(t._s(""))]):i("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}},[t._v(t._s(""))])],1)],1),i("v-uni-view",{staticClass:"clone-case"},[i("v-uni-view",{staticClass:"clone-case-title"},[t._v("克隆")]),i("v-uni-view",{staticClass:"clone-case-btn"},[1!==t.playIndex?i("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(1)}}},[t._v(t._s(""))]):i("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}},[t._v(t._s(""))])],1)],1)],1),i("v-uni-view",{staticStyle:{margin:"15px 0"}},[t._v("音频教程")]),i("v-uni-view",{staticClass:"voice-tutorial"},[i("v-uni-view",{staticClass:"voice-tutorial-btn"},[2!==t.playIndex?i("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"22",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(2)}}},[t._v(t._s(""))]):i("uni-icons",{staticClass:"off-on",attrs:{fontFamily:"CustomFont",size:"22",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}},[t._v(t._s(""))])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"90px",display:"flex","align-items":"center",gap:"30px"}},[i("v-uni-button",{staticClass:"transcribe",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoTranscribe.apply(void 0,arguments)}}},[t._v("在线录制")]),i("v-uni-button",{staticClass:"upload",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadFile.apply(void 0,arguments)}}},[t._v("上传文件")])],1),i("uni-popup",{ref:"recorder",attrs:{"mask-click":!1,type:"bottom","background-color":"#292929",borderRadius:"12px 12px 0 0"}},[i("v-uni-view",{staticClass:"popup-content"},[i("v-uni-view",{staticStyle:{height:"200px","line-height":"50px"}},[i("v-uni-view",{staticClass:"text"},t._l(t.chars,(function(e,n){return i("v-uni-text",{key:n,staticClass:"word",class:{active:t.started},style:t.started?{animationDelay:n*t.delayStep+"s"}:{}},[t._v(t._s(e))])})),1)],1),i("v-uni-view",{staticStyle:{"font-size":"14px","margin-top":"20px","text-align":"center"}}),i("v-uni-view",{staticClass:"recorder-content"},[i("v-uni-canvas",{staticClass:"circle-canvas",attrs:{"canvas-id":"progressCircle"}}),t.audioUrl?t._e():i("v-uni-view",{staticClass:"microphone-icon"},[t.isRecording?t._e():i("uni-icons",{attrs:{type:"mic-filled",size:"30",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.startRecording.apply(void 0,arguments)}}}),t.isRecording?i("uni-icons",{attrs:{type:"smallcircle-filled",size:"30",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopRecording.apply(void 0,arguments)}}}):t._e()],1),t.audioUrl?i("v-uni-view",{staticClass:"microphone-icon"},[3!==t.playIndex?i("uni-icons",{attrs:{fontFamily:"CustomFont",size:"25",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(3)}}},[t._v(t._s(""))]):i("uni-icons",{attrs:{fontFamily:"CustomFont",size:"25",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}},[t._v(t._s(""))])],1):t._e(),i("v-uni-view",{staticClass:"timer"},[t._v(t._s(t.formatTime(t.duration)))]),i("v-uni-view",{staticStyle:{"margin-top":"20px","font-size":"14px","text-align":"center",height:"40px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reRecord.apply(void 0,arguments)}}},[t._v(t._s(t.audioUrl?"重新录制":""))]),i("v-uni-view",{staticStyle:{display:"flex",gap:"30px","margin-top":"20px"}},[i("v-uni-button",{staticClass:"recorder-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCancel.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"recorder-btn",staticStyle:{"background-color":"#e99d42"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleConfirm.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)],1)],1)],1)},o=[]},"73e1":function(t,e,i){"use strict";var n=i("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},"795c":function(t,e,i){"use strict";var n=i("8bdb"),r=i("db04").start,o=i("73e1");n({target:"String",proto:!0,forced:o},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},9327:function(t,e,i){"use strict";var n=i("8bdb"),r=i("9f69"),o=i("1ded").f,a=i("c435"),c=i("9e70"),s=i("b6a1"),u=i("862c"),l=i("0931"),d=i("a734"),f=r("".slice),p=Math.min,v=l("endsWith"),h=!d&&!v&&!!function(){var t=o(String.prototype,"endsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!h&&!v},{endsWith:function(t){var e=c(u(this));s(t);var i=arguments.length>1?arguments[1]:void 0,n=e.length,r=void 0===i?n:p(a(i),n),o=c(t);return f(e,r-o.length,r)===o}})},b93e:function(t,e,i){"use strict";i.r(e);var n=i("6219"),r=i("dcec");for(var o in r)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(o);i("e5b0");var a=i("828b"),c=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,"1fd10e32",null,!1,n["a"],void 0);e["default"]=c.exports},db04:function(t,e,i){"use strict";var n=i("bb80"),r=i("c435"),o=i("9e70"),a=i("f298"),c=i("862c"),s=n(a),u=n("".slice),l=Math.ceil,d=function(t){return function(e,i,n){var a,d,f=o(c(e)),p=r(i),v=f.length,h=void 0===n?" ":o(n);return p<=v||""===h?f:(a=p-v,d=s(h,l(a/h.length)),d.length>a&&(d=u(d,0,a)),t?f+d:d+f)}};t.exports={start:d(!1),end:d(!0)}},dcec:function(t,e,i){"use strict";i.r(e);var n=i("fca3"),r=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},e5b0:function(t,e,i){"use strict";var n=i("11a0"),r=i.n(n);r.a},f298:function(t,e,i){"use strict";var n=i("497b"),r=i("9e70"),o=i("862c"),a=RangeError;t.exports=function(t){var e=r(o(this)),i="",c=n(t);if(c<0||c===1/0)throw new a("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(e+=e))1&c&&(i+=e);return i}},fca3:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i("2634")),o=n(i("2fdc"));i("bf0f"),i("9327"),i("5ef2"),i("20f3"),i("c223"),i("c9b5"),i("ab80"),i("18f7"),i("de6c"),i("dc89"),i("2425"),i("795c"),i("4ec3");var a="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2xpdmUudGVsbGFpLnRlY2giLCJzdWIiOiI3ODNjNGI1NC1hMWQwLTVmY2ItOTExZC1kNWM1YjNjODY2MTAiLCJpYXQiOjE3NDIyMTA0NDQsImV4cCI6MTc1OTc5NTIwMCwibmFtZSI6InRlc3QifQ.OGrW6VfdM7zLVcGjGz9UHblQQlQoHWSriFB90kJOq98",c={data:function(){return{requires:["30秒左右的视频、音频","录制环境安静无杂音","确保录制全程环境一致","保持正常语速、音调","保留自然停顿"],playIndex:null,audioCtx:null,audios:["https://live.tellai.tech/api/news_assistant/static/generated_sample_audio/272f4122-ab74-4bc1-9cd6-c29a41fb508f/20250327145319386.wav","https://live.tellai.tech/api/news_assistant/static/generated_sample_audio/272f4122-ab74-4bc1-9cd6-c29a41fb508f/20250326155734776.wav","https://live.tellai.tech/api/news_assistant/static/generated_sample_audio/272f4122-ab74-4bc1-9cd6-c29a41fb508f/20250326154431855.wav"],duration:0,interval:null,progress:0,ctx:null,isRecording:!1,recorder:null,audioUrl:null,recorderFile:null,sentence:"现在做视频真的太简单了，使用奇点数字人，不用真人出镜也能出爆款视频。",delayStep:.277,started:!1}},computed:{chars:function(){return this.sentence.split("")}},mounted:function(){this.ctx=uni.createCanvasContext("progressCircle",this)},methods:{uploadFile:function(){var t=this;uni.chooseFile({count:1,success:function(e){var i=e.tempFiles[0].name.toLowerCase(),n=[".mp3",".wav",".m4a",".mp4",".mov"].some((function(t){return i.toLowerCase().endsWith(t)}));if(n){var r=-1!==e.tempFiles[0].type.indexOf("audio")?"audio":"video";console.log(e.tempFiles[0]),t.getFileId(r,e.tempFiles[0])}else t.$tip.confirm("请选择有效的音频文件",!1)}})},getFileId:function(t,e){var i=this,n=this;uni.request({url:"https://live.tellai.tech/api/media/files/upload_request?type=".concat(t),header:{Authorization:a},success:function(r){var o=r.data.base_resp,c=r.data.data;if(200===o.status_code){var s={name:e.name.substring(0,s.name.lastIndexOf(".")),type:"voice",id:n.generateUniqueId()};n.$store.dispatch("task/addTask",s),n.$tip.confirm("已创建音色克隆任务\n《".concat(s.name,"》"),!1).then((function(t){uni.redirectTo({url:"/pages/template/voice"})})),uni.uploadFile({url:c.upload_url,filePath:e.path,name:"file",header:{Authorization:a},timeout:18e5,formData:{file_id:c.file_id,type:t},success:function(t){var e=JSON.parse(t.data).base_resp,i=JSON.parse(t.data).data;200===e.status_code?n.clone(i.file_id,s):(n.$store.dispatch("task/removeTask",s.id),n.$tip.confirm("".concat(s.name,"音色克隆任务失败,").concat(e.status_msg),!1))}})}else i.$tip.confirm(o.status_msg,!1)}})},clone:function(t,e){var i=this,n={file_id:t,user_id:uni.getStorageSync("userId"),audio_name:e.name};this.$http.post("/timbres/clone/file_id",n).then((function(t){i.$store.dispatch("task/removeTask",e.id),"success"===t.status?i.$tip.confirm("".concat(e.name,"音色克隆任务成功"),!1):i.$tip.confirm("".concat(e.name,"音色克隆任务失败,").concat(t.message),!1)}))},playAudio:function(t){var e=this;this.audioCtx&&this.stopAudio(),this.audioCtx=uni.createInnerAudioContext(),this.audioCtx.src=3===t?this.audioUrl:this.audios[t],this.audioCtx.autoplay=!0,this.audioCtx.play(),this.audioCtx.onPlay((function(){e.playIndex=t})),this.audioCtx.onEnded((function(){e.stopAudio()}))},stopAudio:function(){this.audioCtx&&(this.audioCtx.pause(),this.audioCtx.destroy(),this.audioCtx=null,this.playIndex=null)},generateUniqueId:function(){return Date.now()+Math.random().toString(36).substr(2,16)},back:function(){uni.switchTab({url:"/pages/template/index"})},gotoVoices:function(){uni.redirectTo({url:"/pages/template/voice"})},gotoTranscribe:function(){var t=this;this.$refs.recorder.open(),setTimeout((function(){t.drawProgress()}),50)},startRecording:function(){var t=this;uni.showToast({title:"录音环境准备中",icon:"loading"}),this.recorder=window.Recorder({type:"wav",sampleRate:16e3,bitRate:16}),this.recorder.open((0,o.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.recorder.start();case 2:uni.hideToast(),t.isRecording=!0,t.started=!0,t.interval=setInterval((function(){t.duration<15?(t.duration++,t.progress=t.duration%60/15,t.drawProgress()):t.stopRecording()}),1e3);case 6:case"end":return e.stop()}}),e)}))),(function(e,i){t.$tip.confirm("录音失败".concat(e),!1)}))},stopRecording:function(){var t=this;this.recorder&&this.recorder.stop((function(e,i){t.isRecording=!1,t.started=!1,t.progress=0,t.drawProgress(),clearInterval(t.interval),t.audioUrl=URL.createObjectURL(e),t.recorder.close();var n=uni.getStorageSync("recorderIndex")?uni.getStorageSync("recorderIndex")+1:1;t.recorderFile=new File([e],"recording_".concat(n,".wav"),{type:"audio/wav"})}),(function(e){t.$tip.confirm("停止失败".concat(e),!1)}))},drawProgress:function(){var t=this.ctx;t.clearRect(0,0,100,100),t.beginPath(),t.arc(50,50,40,0,2*Math.PI),t.setStrokeStyle("#eeeeee"),t.setLineWidth(4),t.stroke(),t.beginPath(),t.arc(50,50,40,-.5*Math.PI,2*this.progress*Math.PI-.5*Math.PI),t.setStrokeStyle("#00C6AD"),t.setLineWidth(4),t.stroke(),t.draw()},formatTime:function(t){var e=Math.floor(t/60).toString().padStart(2,"0"),i=(t%60).toString().padStart(2,"0");return"".concat(e,":").concat(i)},reRecord:function(){this.audioUrl=null,this.progress=0,this.drawProgress(),this.duration=0,this.started=!1},handleCancel:function(){this.recorder&&this.recorder.close(),this.reRecord(),this.$refs.recorder.close()},handleConfirm:function(){var t=this,e=this;uni.request({url:"https://live.tellai.tech/api/media/files/upload_request?type=audio",header:{Authorization:a},success:function(i){var n=i.data.base_resp,r=i.data.data;if(200===n.status_code){var o=uni.getStorageSync("recorderIndex")?uni.getStorageSync("recorderIndex")+1:1;uni.setStorageSync("recorderIndex",o);var c={name:"recording_".concat(o),type:"voice",id:e.generateUniqueId()};e.$store.dispatch("task/addTask",c),e.$tip.confirm("已创建音色克隆任务\n《".concat(c.name,"》"),!1).then((function(t){uni.redirectTo({url:"/pages/template/voice"})})),uni.uploadFile({url:r.upload_url,file:t.recorderFile,name:"file",header:{Authorization:a},timeout:18e5,formData:{file_id:r.file_id,type:"audio"},success:function(t){var i=JSON.parse(t.data).base_resp,n=JSON.parse(t.data).data;200===i.status_code?e.clone(n.file_id,c):(e.$store.dispatch("task/removeTask",c.id),e.$tip.confirm("".concat(c.name,"音色克隆任务失败,").concat(i.status_msg),!1))}})}else t.$tip.confirm(n.status_msg,!1)}})}},beforeDestroy:function(){this.stopAudio()}};e.default=c}}]);