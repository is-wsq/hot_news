(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-figure"],{1173:function(e,t,i){"use strict";i.r(t);var n=i("c402"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},"40ea":function(e,t,i){"use strict";var n=i("4e50"),s=i.n(n);s.a},"4e50":function(e,t,i){var n=i("cae5");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("967d").default;s("43f0787a",n,!0,{sourceMap:!1,shadowMode:!1})},c402:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("bf0f"),i("2797"),i("aa9c");var n={name:"Figure",data:function(){return{safeAreaHeight:uni.getSystemInfoSync().safeArea.height,safeAreaWidth:uni.getSystemInfoSync().safeArea.width,systems:[],clones:[],selectedFigure:{},src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/2minute-demo.mp4",isPlaying:!1,cloneSound:!1,selectedFile:null}},onShow:function(){this.queryFigures()},methods:{queryFigures:function(){var e=this;this.systems=[],this.clones=[],this.$http.get("/figure/query/user",{user_id:uni.getStorageSync("userId")}).then((function(t){"success"===t.status?t.data.forEach((function(t){"system"===t.type?e.systems.push(t):e.clones.push(t)})):e.$tip.toast(t.message)}))},previewFigure:function(e){this.selectedFigure=e,this.$refs.previewPopup.open()},controlVideo:function(){this.$refs.video.play(),this.isPlaying=!0},popupClose:function(){this.isPlaying=!1,this.$refs.video.pause(),this.$refs.previewPopup.close()},cloneFigure:function(){this.$refs.clonePopup.open()},selectFile:function(){var e=this;uni.chooseFile({count:1,success:function(t){console.log(t),e.selectedFile=t.tempFiles[0]}})},clone:function(){console.log(this.selectedFile),console.log(this.cloneSound)},clonePopupClose:function(){this.selectedFile=null,this.cloneSound=!1,this.$refs.clonePopup.close()},back:function(){uni.switchTab({url:"/pages/template/index"})}}};t.default=n},cae5:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".figure-type-name[data-v-7c6eb876]{color:#fff;font-size:16px;line-height:50px}.figure-list[data-v-7c6eb876]{height:calc(50% - 90px);background-color:#292929;border-radius:10px;padding:10px;box-sizing:border-box;overflow:auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-auto-rows:90px;gap:20px}.figure-item[data-v-7c6eb876]{display:flex;border:1px solid #3a3a3a;padding:10px;border-radius:10px;box-sizing:border-box;flex:1;height:90px}.active-item[data-v-7c6eb876]{border:1px solid #e99d42}.figure-avatar[data-v-7c6eb876]{width:60px;height:70px;border-radius:10px}.clone-figure-icon[data-v-7c6eb876]{border:1px solid #e99d42;line-height:70px}.figure-name[data-v-7c6eb876]{margin-left:10px;flex:1;color:#fff;font-size:14px;line-height:70px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.preview-content[data-v-7c6eb876]{background-color:#292929;padding:20px 0;box-sizing:border-box}.preview-title[data-v-7c6eb876]{display:flex;align-items:center;justify-content:center;position:relative;margin-bottom:20px}.preview-close[data-v-7c6eb876]{position:absolute;top:5px;right:10px;color:#fff}.play-icon[data-v-7c6eb876]{height:20px;width:20px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.clone-content[data-v-7c6eb876]{background:#fff;border-radius:11px;padding-top:20px;box-sizing:border-box}.clone-title[data-v-7c6eb876]{font-size:16px;font-weight:500;color:#909399;text-align:center}.file-name[data-v-7c6eb876]{font-size:14px;line-height:36px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.clone-btn[data-v-7c6eb876]{flex:1;height:50px;line-height:50px;text-align:center;font-size:16px;border-radius:0 0 0 11px;border-top:1px solid #f5f5f5}",""]),e.exports=t},d5c4:function(e,t,i){"use strict";i.r(t);var n=i("dd94"),s=i("1173");for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("40ea");var o=i("828b"),c=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"7c6eb876",null,!1,n["a"],void 0);t["default"]=c.exports},dd94:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("00f9").default,uniPopup:i("3182").default},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"pages figure",style:{height:e.safeAreaHeight+"px"}},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[e._v("形象列表")])],1),i("v-uni-view",{staticClass:"figure-type-name"},[e._v("系统形象")]),i("v-uni-view",{staticClass:"figure-list"},e._l(e.systems,(function(t){return i("v-uni-view",{key:t.id,staticClass:"figure-item",class:{"active-item":e.selectedFigure.id===t.id},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.previewFigure(t)}}},[i("v-uni-image",{staticClass:"figure-avatar",attrs:{src:t.picture}}),i("v-uni-view",{staticClass:"figure-name"},[e._v(e._s(t.name))])],1)})),1),i("v-uni-view",{staticClass:"figure-type-name"},[e._v("克隆形象")]),i("v-uni-view",{staticClass:"figure-list"},[i("v-uni-view",{staticClass:"figure-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cloneFigure.apply(void 0,arguments)}}},[i("uni-icons",{staticClass:"figure-avatar clone-figure-icon",attrs:{type:"plusempty",size:"25",color:"#e99d42"}}),i("v-uni-view",{staticClass:"figure-name",staticStyle:{color:"#e99d42 !important"}},[e._v("克隆形象")])],1),e._l(e.clones,(function(t){return i("v-uni-view",{key:t.id,staticClass:"figure-item",class:{"figure-item":e.selectedFigure.id===t.id},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.previewFigure(t)}}},[i("v-uni-image",{staticClass:"figure-avatar",attrs:{src:t.avatar}}),i("v-uni-view",{staticClass:"figure-name"},[e._v(e._s(t.name))])],1)}))],2),i("uni-popup",{ref:"previewPopup",attrs:{"mask-click":!1,type:"bottom"}},[i("v-uni-view",{staticClass:"preview-content",style:{height:e.safeAreaHeight+"px"}},[i("v-uni-view",{staticClass:"preview-title"},[i("v-uni-view",{staticStyle:{color:"#ffffff","font-size":"16px"}},[e._v("[ "+e._s(e.selectedFigure.name)+" ] 形象预览")]),i("uni-icons",{staticClass:"preview-close",attrs:{type:"closeempty",size:"20",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.popupClose.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticStyle:{height:"calc(100% - 30px)",position:"relative"}},[i("uni-icons",{staticClass:"preview-close",attrs:{type:"closeempty",size:"20",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.popupClose.apply(void 0,arguments)}}}),i("v-uni-video",{ref:"video",staticStyle:{width:"100%",height:"100%"},attrs:{src:e.src,controls:!1,"show-center-play-btn":!1}}),e.isPlaying?e._e():i("uni-icons",{staticClass:"play-icon",attrs:{"custom-prefix":"iconfont",type:"icon-play",size:"20",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.controlVideo.apply(void 0,arguments)}}})],1)],1)],1),i("uni-popup",{ref:"clonePopup",staticStyle:{width:"100%"},attrs:{"mask-click":!1,type:"center"}},[i("v-uni-view",{staticClass:"clone-content",style:{width:.8*e.safeAreaWidth+"px"}},[i("v-uni-view",{staticClass:"clone-title"},[e._v("克隆形象")]),i("v-uni-view",{staticStyle:{padding:"30px","box-sizing":"border-box"}},[e.selectedFile?i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticClass:"file-name"},[e._v(e._s(e.selectedFile.name))]),i("uni-icons",{staticStyle:{"margin-left":"10px","line-height":"36px"},attrs:{type:"trash-filled",size:"20",color:"#9a9a9a"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectedFile=null}}})],1):i("v-uni-button",{staticStyle:{"font-size":"14px"},attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectFile.apply(void 0,arguments)}}},[e._v("选择文件")]),i("v-uni-view",{staticStyle:{"margin-top":"10px",display:"flex","align-items":"center"}},[i("v-uni-checkbox-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.cloneSound=!e.cloneSound}}},[i("v-uni-checkbox",{staticStyle:{transform:"scale(0.7)"},attrs:{color:"#42B983"}})],1),i("v-uni-view",{staticStyle:{"font-size":"14px"}},[e._v("同时克隆声音")])],1)],1),i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticClass:"clone-btn",staticStyle:{"border-right":"1px solid #f5f5f5"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clonePopupClose.apply(void 0,arguments)}}},[e._v("取消")]),i("v-uni-view",{staticClass:"clone-btn",staticStyle:{color:"#007aff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clone.apply(void 0,arguments)}}},[e._v("克隆")])],1)],1)],1)],1)},a=[]}}]);