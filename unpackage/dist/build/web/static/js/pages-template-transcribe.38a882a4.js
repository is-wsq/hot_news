(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-transcribe"],{5264:function(e,t,r){"use strict";var n=r("afea"),a=r.n(n);a.a},6498:function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("5ef2"),r("bf0f"),r("2797"),r("aa9c"),r("18f7"),r("de6c"),r("dc89"),r("2425"),r("c9b5"),r("ab80"),r("dd2b"),r("e838");var n={data:function(){return{isUserMedia:!1,stream:null,audio:null,recorder:null,chunks:[],startTime:0}},mounted:function(){if(-1===origin.indexOf("https"))throw this.$emit("error","100"),"请在 https 环境中使用本插件。";if(!navigator.mediaDevices||!window.MediaRecorder)throw this.$emit("error","101"),"当前浏览器不支持";this.getRecorderManager()},methods:{getRecorderManager:function(){var e=this;this.audio=document.createElement("audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.isUserMedia=!0,t.getTracks().forEach((function(e){e.stop()}))})).catch((function(t){e.onErrorHandler(t)}))},start:function(){var e=this;if(!this.isUserMedia)return console.log("设备不支持");navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.startTime=(new Date).getTime(),e.stream=t,e.recorder=new MediaRecorder(t),e.recorder.ondataavailable=e.getRecordingData,e.recorder.onstop=e.saveRecordingData,e.recorder.start()})).catch((function(t){e.onErrorHandler(t)}))},stop:function(){this.recorder.stop(),this.stream.getTracks().forEach((function(e){e.stop()}))},getRecordingData:function(e){this.chunks.push(e.data)},saveRecordingData:function(){var e=new Blob(this.chunks,{type:"audio/mpeg"}),t=URL.createObjectURL(e),r=(new Date).getTime(),n=(r-this.startTime).toString().split("");n.splice(n.length-2),n.splice(n.length-1,0,"."),n=parseFloat(n.join(""));var a={data:e,duration:n,localUrl:t};this.$emit("success",a)},onErrorHandler:function(e){if(console.log(e),"NotAllowedError"===e.name)throw this.$emit("error","201"),"用户拒绝了当前的浏览器实例的访问请求";if("NotReadableError"===e.name)throw this.$emit("error","101"),"当前浏览器不支持";throw this.$emit("error","500"),"调用失败，原因不详"}},destroyed:function(){this.stop()}};t.default=n},"6f3e":function(e,t,r){"use strict";r("6a54");var n=r("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("d4b5");var a=n(r("a5ec")),i={components:{MumuRecorder:a.default},data:function(){return{status:!1,recorder:null}},mounted:function(){},methods:{handlerSave:function(){var e=document.createElement("a");e.href=this.recorder.localUrl,e.download="录音",e.click()},handlerOnCahnger:function(){this.status?this.$refs.recorder.stop():this.$refs.recorder.start(),this.status=!this.status},handlerSuccess:function(e){this.$tip.confirm(JSON.stringify(e),!1),this.recorder=e},handlerError:function(e){switch(e){case"101":uni.showModal({content:"当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。"});break;case"201":uni.showModal({content:"麦克风权限被拒绝，请刷新页面后授权麦克风权限。"});break;default:uni.showModal({content:"未知错误，请刷新页面重试"});break}},back:function(){uni.redirectTo({url:"/pages/template/voicesClone"})}}};t.default=i},"742d":function(e,t,r){"use strict";r.r(t);var n=r("901e"),a=r("fbee");for(var i in a)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("5264");var o=r("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"cd0053c4",null,!1,n["a"],void 0);t["default"]=c.exports},"901e":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var n={uniIcons:r("00f9").default,mumuRecorder:r("a5ec").default},a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"pages transcribe"},[r("v-uni-view",{staticClass:"nav-bar-header"},[r("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"nav-bar-title"},[e._v("在线录制")])],1),r("v-uni-view",[e.recorder?r("v-uni-audio",{attrs:{src:e.recorder.localUrl,name:"本地录音",controls:"true"}}):e._e(),r("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerOnCahnger.apply(void 0,arguments)}}},[e._v(e._s(e.status?"结束录音":"开始录音"))]),r("mumu-recorder",{ref:"recorder",on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerSuccess.apply(void 0,arguments)},error:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerError.apply(void 0,arguments)}}})],1)],1)},i=[]},"92e0":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"recorder"})},a=[]},a5ec:function(e,t,r){"use strict";r.r(t);var n=r("92e0"),a=r("ebdc");for(var i in a)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(i);var o=r("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"75a40eb8",null,!1,n["a"],void 0);t["default"]=c.exports},afea:function(e,t,r){var n=r("e0a5");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("967d").default;a("d775f1c8",n,!0,{sourceMap:!1,shadowMode:!1})},e0a5:function(e,t,r){var n=r("c86c");t=n(!1),t.push([e.i,".transcribe[data-v-cd0053c4]{height:100vh;color:#fff}",""]),e.exports=t},ebdc:function(e,t,r){"use strict";r.r(t);var n=r("6498"),a=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},fbee:function(e,t,r){"use strict";r.r(t);var n=r("6f3e"),a=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a}}]);