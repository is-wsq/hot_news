(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-voicesClone"],{2085:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".voicesClone[data-v-6f66e93c]{height:100vh;color:#fff}.voices-list[data-v-6f66e93c]{position:absolute;right:5px;color:#fff}.voice-content[data-v-6f66e93c]{height:calc(100% - 150px);overflow-y:auto}.template-img[data-v-6f66e93c]{background-image:url(/static/img/microphone.png);border-radius:10px;width:180px;height:240px;margin-right:5px;background-size:cover;background-repeat:no-repeat;background-position:50%}.clone-case[data-v-6f66e93c]{flex:1;border-radius:10px;height:82px;background-image:url(/static/img/case.png);background-size:cover;background-repeat:no-repeat;position:relative}.clone-case-title[data-v-6f66e93c]{position:absolute;bottom:5px;left:5px;color:#fff;font-size:14px}.clone-case-btn[data-v-6f66e93c]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:45px;height:45px;border-radius:50%;background-color:rgba(16,16,16,.15);display:flex;justify-content:center;align-items:center}.voice-tutorial[data-v-6f66e93c]{height:150px;border-radius:10px;background-image:url(/static/img/microphone_copy.png);background-size:cover;background-repeat:no-repeat;position:relative}.voice-tutorial-btn[data-v-6f66e93c]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:60px;height:60px;border-radius:50%;background-color:rgba(16,16,16,.15);display:flex;justify-content:center;align-items:center}.transcribe[data-v-6f66e93c]{flex:1;height:55px;line-height:55px;border-radius:10px}.upload[data-v-6f66e93c]{flex:1;height:55px;line-height:55px;background-color:#e99d42;color:#fff;border-radius:10px}",""]),t.exports=e},"20f3":function(t,e,i){"use strict";var a=i("8bdb"),n=i("5145");a({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},6093:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uniIcons:i("00f9").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pages voicesClone"},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[t._v("音色克隆")]),i("v-uni-view",{staticClass:"voices-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoVoices.apply(void 0,arguments)}}},[t._v("音色列表")])],1),i("v-uni-view",{staticClass:"voice-content"},[i("v-uni-view",{staticStyle:{"margin-bottom":"15px"}},[t._v("正确示例")]),i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticClass:"template-img"}),i("v-uni-view",{staticClass:"template-requires"},t._l(t.requires,(function(e,a){return i("v-uni-view",{key:a,staticStyle:{height:"40px",display:"flex","align-items":"center"}},[i("uni-icons",{staticStyle:{margin:"0 5px"},attrs:{type:"checkbox-filled",size:"22",color:"#77C285"}}),i("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e))])],1)})),1)],1),i("v-uni-view",{staticStyle:{margin:"15px 0"}},[t._v("克隆案例")]),i("v-uni-view",{staticStyle:{display:"flex",gap:"30px"}},[i("v-uni-view",{staticClass:"clone-case"},[i("v-uni-view",{staticClass:"clone-case-title"},[t._v("原声")]),i("v-uni-view",{staticClass:"clone-case-btn"},[0!==t.playIndex?i("uni-icons",{staticClass:"off-on",attrs:{"custom-prefix":"iconfont",type:"icon-play",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(0)}}}):i("uni-icons",{staticClass:"off-on",attrs:{"custom-prefix":"iconfont",type:"icon-pause",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}})],1)],1),i("v-uni-view",{staticClass:"clone-case"},[i("v-uni-view",{staticClass:"clone-case-title"},[t._v("克隆")]),i("v-uni-view",{staticClass:"clone-case-btn"},[1!==t.playIndex?i("uni-icons",{staticClass:"off-on",attrs:{"custom-prefix":"iconfont",type:"icon-play",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(1)}}}):i("uni-icons",{staticClass:"off-on",attrs:{"custom-prefix":"iconfont",type:"icon-pause",size:"18",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}})],1)],1)],1),i("v-uni-view",{staticStyle:{margin:"15px 0"}},[t._v("音频教程")]),i("v-uni-view",{staticClass:"voice-tutorial"},[i("v-uni-view",{staticClass:"voice-tutorial-btn"},[2!==t.playIndex?i("uni-icons",{staticClass:"off-on",attrs:{"custom-prefix":"iconfont",type:"icon-play",size:"22",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playAudio(2)}}}):i("uni-icons",{staticClass:"off-on",attrs:{"custom-prefix":"iconfont",type:"icon-pause",size:"22",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopAudio()}}})],1)],1)],1),i("v-uni-view",{staticStyle:{height:"90px",display:"flex","align-items":"center",gap:"30px"}},[i("v-uni-button",{staticClass:"transcribe"},[t._v("在线录制")]),i("v-uni-button",{staticClass:"upload",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadFile.apply(void 0,arguments)}}},[t._v("上传文件")])],1)],1)},o=[]},"6f05":function(t,e,i){"use strict";var a=i("f8c7"),n=i.n(a);n.a},9327:function(t,e,i){"use strict";var a=i("8bdb"),n=i("9f69"),o=i("1ded").f,s=i("c435"),c=i("9e70"),r=i("b6a1"),l=i("862c"),u=i("0931"),f=i("a734"),d=n("".slice),p=Math.min,v=u("endsWith"),h=!f&&!v&&!!function(){var t=o(String.prototype,"endsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!h&&!v},{endsWith:function(t){var e=c(l(this));r(t);var i=arguments.length>1?arguments[1]:void 0,a=e.length,n=void 0===i?a:p(s(i),a),o=c(t);return d(e,n-o.length,n)===o}})},b93e:function(t,e,i){"use strict";i.r(e);var a=i("6093"),n=i("dcec");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("6f05");var s=i("828b"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"6f66e93c",null,!1,a["a"],void 0);e["default"]=c.exports},dcec:function(t,e,i){"use strict";i.r(e);var a=i("fca3"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},f8c7:function(t,e,i){var a=i("2085");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("2fbac028",a,!0,{sourceMap:!1,shadowMode:!1})},fca3:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f"),i("9327"),i("5ef2"),i("c223"),i("20f3"),i("c9b5"),i("ab80");var a="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2xpdmUudGVsbGFpLnRlY2giLCJzdWIiOiI3ODNjNGI1NC1hMWQwLTVmY2ItOTExZC1kNWM1YjNjODY2MTAiLCJpYXQiOjE3NDIyMTA0NDQsImV4cCI6MTc1OTc5NTIwMCwibmFtZSI6InRlc3QifQ.OGrW6VfdM7zLVcGjGz9UHblQQlQoHWSriFB90kJOq98",n={data:function(){return{requires:["30秒左右的视频、音频","录制环境安静无杂音","确保录制全程环境一致","保持正常语速、音调","保留自然停顿"],playIndex:null,audioCtx:null,audios:["https://live.tellai.tech/api/news_assistant/static/generated_sample_audio/272f4122-ab74-4bc1-9cd6-c29a41fb508f/20250327145319386.wav","https://live.tellai.tech/api/news_assistant/static/generated_sample_audio/272f4122-ab74-4bc1-9cd6-c29a41fb508f/20250326155734776.wav","https://live.tellai.tech/api/news_assistant/static/generated_sample_audio/272f4122-ab74-4bc1-9cd6-c29a41fb508f/20250326154431855.wav"]}},methods:{uploadFile:function(){var t=this;uni.chooseFile({count:1,success:function(e){var i=e.tempFiles[0].name.toLowerCase(),a=[".mp3",".wav",".m4a",".mp4",".mov"].some((function(t){return i.toLowerCase().endsWith(t)}));if(a){var n=-1!==e.tempFiles[0].type.indexOf("audio")?"audio":"video";t.getFileId(n,e.tempFiles[0])}else t.$tip.confirm("请选择有效的音频文件",!1)}})},getFileId:function(t,e){var i=this,n=this;uni.request({url:"https://live.tellai.tech/api/media/files/upload_request?type=".concat(t),header:{Authorization:a},success:function(o){var s=o.data.base_resp,c=o.data.data;if(200===s.status_code){var r={name:e.name,type:"voice",id:n.generateUniqueId()};n.$store.dispatch("task/addTask",r),n.$tip.confirm("已创建音色克隆任务\n《".concat(e.name,"》"),!1).then((function(t){uni.redirectTo({url:"/pages/template/voice"})})),uni.uploadFile({url:c.upload_url,filePath:e.path,name:"file",header:{Authorization:a},timeout:18e5,formData:{file_id:c.file_id,type:t},success:function(t){var e=JSON.parse(t.data).base_resp,i=JSON.parse(t.data).data;200===e.status_code?n.clone(i.file_id,r):(n.$store.dispatch("task/removeTask",r.id),n.$tip.confirm("".concat(r.name,"音色克隆任务失败,").concat(e.status_msg),!1))}})}else i.$tip.confirm(s.status_msg,!1)}})},clone:function(t,e){var i=this,a={file_id:t,user_id:uni.getStorageSync("userId"),audio_name:e.name.substring(0,e.name.lastIndexOf("."))};this.$http.post("/timbres/clone/file_id",a).then((function(t){i.$store.dispatch("task/removeTask",e.id),"success"===t.status?i.$tip.confirm("".concat(e.name,"音色克隆任务成功"),!1):i.$tip.confirm("".concat(e.name,"音色克隆任务失败,").concat(t.message),!1)}))},playAudio:function(t){var e=this;this.audioCtx&&this.stopAudio(),this.audioCtx=uni.createInnerAudioContext(),this.audioCtx.src=this.audios[t],this.audioCtx.autoplay=!0,this.audioCtx.play(),this.audioCtx.onPlay((function(){e.playIndex=t})),this.audioCtx.onEnded((function(){e.stopAudio()}))},stopAudio:function(){this.audioCtx&&(this.audioCtx.pause(),this.audioCtx.destroy(),this.audioCtx=null,this.playIndex=null)},generateUniqueId:function(){return Date.now()+Math.random().toString(36).substr(2,16)},back:function(){uni.switchTab({url:"/pages/template/index"})},gotoVoices:function(){uni.redirectTo({url:"/pages/template/voice"})}},beforeDestroy:function(){this.stopAudio()}};e.default=n}}]);