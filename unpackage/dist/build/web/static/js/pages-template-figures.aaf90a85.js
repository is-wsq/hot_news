(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-figures"],{"0128":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,"@font-face{font-family:CustomFont;src:url(/static/iconfont.ttf)}.figures[data-v-50472cfa]{height:100vh}.figure-list[data-v-50472cfa]{display:grid;gap:20px;grid-auto-flow:column;overflow-x:auto}.item-title[data-v-50472cfa]{font-size:14px;color:#fff;text-align:center;margin-top:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.figure-name[data-v-50472cfa]{text-align:center;color:#fff;line-height:30px;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.preview-content[data-v-50472cfa]{background-color:#292929;padding:20px 0;box-sizing:border-box}.preview-title[data-v-50472cfa]{display:flex;align-items:center;justify-content:center;position:relative;margin-bottom:20px}.preview-close[data-v-50472cfa]{position:absolute;top:5px;right:10px;color:#fff}.play-icon[data-v-50472cfa]{height:20px;width:20px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loading-title[data-v-50472cfa]{position:absolute;color:#fff;font-size:14px;width:100%;text-align:center;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:flex;align-items:center;justify-content:center}.dot[data-v-50472cfa]{width:20px;text-align:left;margin-left:5px;font-size:16px;line-height:40px}",""]),t.exports=e},"2deb":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("00f9").default,uniPopup:i("3182").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pages figures"},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[t._v("形象列表")])],1),i("v-uni-view",{staticStyle:{"font-size":"18px",color:"#ffffff","margin-bottom":"10px"}},[t._v("系统形象")]),i("v-uni-view",{staticClass:"figure-list",style:{height:t.heightStyle+30+"px",gridTemplateRows:"repeat(1, "+(t.heightStyle+30)+"px)",gridAutoColumns:3*t.heightStyle/4+"px"}},t._l(t.systems,(function(e){return i("v-uni-view",{key:e.id,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewFigure(e)}}},[i("v-uni-image",{style:{height:t.heightStyle+"px",width:3*t.heightStyle/4+"px",borderRadius:"10px"},attrs:{src:e.picture}}),i("v-uni-view",{staticClass:"figure-name",style:{width:3*t.heightStyle/4+"px"}},[t._v(t._s(e.name))])],1)})),1),i("v-uni-view",{staticStyle:{"font-size":"18px",color:"#ffffff",margin:"15px 0"}},[t._v("我的形象")]),i("v-uni-view",{staticClass:"figure-list",style:{height:2*t.heightStyle+85+"px",gridTemplateRows:"repeat(2, "+(t.heightStyle+30)+"px)",gridAutoColumns:3*t.heightStyle/4+"px"}},[t._l(t.figureTasks,(function(e){return i("v-uni-view",{key:e.id},[i("v-uni-view",{staticClass:"image-wrapper shining"},[i("v-uni-image",{style:{height:t.heightStyle+"px",width:3*t.heightStyle/4+"px",borderRadius:"10px"},attrs:{src:"/static/img/20.png"}}),i("v-uni-view",{staticClass:"shine-layer"}),i("v-uni-view",{staticClass:"loading-title"},[i("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v("视频生成中")]),i("v-uni-view",{staticClass:"dot",staticStyle:{"font-size":"20px"}},[t._v(t._s(t.dot))])],1)],1),i("v-uni-view",{staticClass:"figure-name",staticStyle:{"margin-top":"-5px"}},[t._v(t._s(e.name))])],1)})),t._l(t.clones,(function(e){return i("v-uni-view",{key:e.id,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewFigure(e)}}},[i("v-uni-image",{style:{height:t.heightStyle+"px",width:3*t.heightStyle/4+"px",borderRadius:"10px"},attrs:{src:e.picture}}),i("v-uni-view",{staticClass:"figure-name",style:{width:3*t.heightStyle/4+"px"}},[t._v(t._s(e.name))])],1)}))],2),i("uni-popup",{ref:"popup",attrs:{type:"center","border-radius":"10px"},on:{maskClick:function(e){arguments[0]=e=t.$handleEvent(e),t.popupClose.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{position:"relative"}},[i("v-uni-video",{ref:"video",staticStyle:{"border-radius":"10px"},style:{width:.8*t.safeArea.width+"px",height:.8*t.safeArea.width*4/3+"px"},attrs:{src:t.selectedFigure.filepath,controls:!1,poster:t.selectedFigure.picture,"show-center-play-btn":!1},on:{ended:function(e){arguments[0]=e=t.$handleEvent(e),t.isPlaying=!1}}}),t.isPlaying?t._e():i("uni-icons",{staticClass:"play-icon",attrs:{fontFamily:"CustomFont",size:"30",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.controlVideo.apply(void 0,arguments)}}},[t._v(t._s(""))])],1)],1)],1)},a=[]},7396:function(t,e,i){"use strict";var n=i("bb1d"),s=i.n(n);s.a},a578:function(t,e,i){"use strict";var n=i("8bdb"),s=i("f298");n({target:"String",proto:!0},{repeat:s})},bb1d:function(t,e,i){var n=i("0128");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("967d").default;s("064a30c4",n,!0,{sourceMap:!1,shadowMode:!1})},cda8:function(t,e,i){"use strict";i.r(e);var n=i("2deb"),s=i("f953");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("7396");var o=i("828b"),r=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"50472cfa",null,!1,n["a"],void 0);e["default"]=r.exports},e61d:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("8f71"),i("bf0f"),i("a578"),i("2797"),i("aa9c");var s=n(i("9b1b")),a=i("8f59"),o={data:function(){return{safeArea:uni.getSystemInfoSync().safeArea,systems:[],clones:[],heightStyle:0,figureStyle:{},contentStyle:{},dotCount:1,dotTimer:null,dot:".",selectedFigure:{},isPlaying:!1}},computed:(0,s.default)((0,s.default)({},(0,a.mapGetters)("task",["allTasks"])),{},{figureTasks:function(){return this.allTasks.filter((function(t){return"figures"===t.type}))}}),watch:{figureTasks:{handler:function(){this.queryFigures()},deep:!0}},mounted:function(){this.queryFigures(),this.heightStyle=(uni.getSystemInfoSync().safeArea.height-320)/3,this.figureTasks.length>0&&this.startDotAnimation()},beforeDestroy:function(){clearInterval(this.dotTimer)},methods:{startDotAnimation:function(){var t=this;this.dotTimer=setInterval((function(){t.dotCount=t.dotCount%3+1,t.dot=".".repeat(t.dotCount)}),1e3)},queryFigures:function(){var t=this;this.systems=[],this.clones=[],this.$http.get("/figure/query/user",{user_id:uni.getStorageSync("userId")}).then((function(e){"success"===e.status?e.data.forEach((function(e){"system"===e.type?t.systems.push(e):t.clones.push(e)})):t.$tip.confirm(e.message,!1)}))},previewFigure:function(t){this.selectedFigure=t,this.$refs.popup.open()},controlVideo:function(){this.$refs.video.play(),this.isPlaying=!0},popupClose:function(){this.isPlaying=!1,this.$refs.video.pause()},back:function(){uni.redirectTo({url:"/pages/template/figureClone"})}}};e.default=o},f298:function(t,e,i){"use strict";var n=i("497b"),s=i("9e70"),a=i("862c"),o=RangeError;t.exports=function(t){var e=s(a(this)),i="",r=n(t);if(r<0||r===1/0)throw new o("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},f953:function(t,e,i){"use strict";i.r(e);var n=i("e61d"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a}}]);