(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-figure"],{"05cd":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".user-figure[data-v-347d5f5a]{height:100vh}.manageBtn[data-v-347d5f5a]{position:absolute;right:5px;font-size:16px;color:#fff}.user-figure-container[data-v-347d5f5a]{height:calc(100% - 230px);padding:20px 15px;box-sizing:border-box;background:linear-gradient(180deg,rgba(233,157,66,.2),rgba(233,157,157,0));box-shadow:2px 4px 10px rgba(0,0,0,.4);border-radius:15px;display:grid;grid-template-columns:repeat(3,1fr);gap:18px;overflow-y:auto}.user-figure-item-img[data-v-347d5f5a]{border-radius:15px}.user-figure-item-name[data-v-347d5f5a]{line-height:30px;height:30px;color:#fff;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px}.user-figure-footer[data-v-347d5f5a]{height:165px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:25px}.user-figure-btn[data-v-347d5f5a]{height:40px;line-height:40px;width:255px;border-radius:10px;color:#101010}.play-icon[data-v-347d5f5a]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.user-figure-itemActive[data-v-347d5f5a]{border:1px solid #e99d42;box-shadow:0 0 6px 0 #e99d42}",""]),e.exports=t},"117f":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.uni-popup-dialog[data-v-b2d7af54]{width:300px;border-radius:11px;background-color:#fff}.uni-dialog-title[data-v-b2d7af54]{display:flex;flex-direction:row;justify-content:center;padding-top:25px}.uni-dialog-title-text[data-v-b2d7af54]{font-size:16px;font-weight:500}.uni-dialog-content[data-v-b2d7af54]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:20px}.uni-dialog-content-text[data-v-b2d7af54]{font-size:14px;color:#6c6c6c}.uni-dialog-button-group[data-v-b2d7af54]{display:flex;flex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:1px}.uni-dialog-button[data-v-b2d7af54]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:45px}.uni-border-left[data-v-b2d7af54]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:1px}.uni-dialog-button-text[data-v-b2d7af54]{font-size:16px;color:#333}.uni-button-color[data-v-b2d7af54]{color:#007aff}.uni-dialog-input[data-v-b2d7af54]{flex:1;font-size:14px;border:1px #eee solid;height:40px;padding:0 10px;border-radius:5px;color:#555}.uni-popup__success[data-v-b2d7af54]{color:#4cd964}.uni-popup__warn[data-v-b2d7af54]{color:#f0ad4e}.uni-popup__error[data-v-b2d7af54]{color:#dd524d}.uni-popup__info[data-v-b2d7af54]{color:#909399}',""]),e.exports=t},1502:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("00f9").default,uniPopup:i("3182").default,uniPopupDialog:i("7338").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"pages user-figure"},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[e._v("我的数字人")]),i("v-uni-view",{staticClass:"manageBtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.manage.apply(void 0,arguments)}}},[e._v("管理")])],1),i("v-uni-view",{staticClass:"user-figure-container",style:{gridAutoRows:4*e.figureWidth/3+30+"px"}},e._l(e.figures,(function(t){return i("v-uni-view",{key:t.id,staticClass:"user-figure-item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.manageFigure(t)}}},[i("v-uni-image",{staticClass:"user-figure-item-img",class:{"user-figure-itemActive":-1!==e.selectedFigures.findIndex((function(e){return e.id===t.id}))},style:{width:e.figureWidth+"px",height:4*e.figureWidth/3+"px"},attrs:{src:t.picture}}),i("v-uni-view",{staticClass:"user-figure-item-name",style:{width:e.figureWidth+"px"}},[e._v(e._s(t.name))])],1)})),1),e.isManage?i("v-uni-view",{staticClass:"user-figure-footer"},[i("v-uni-button",{staticClass:"user-figure-btn",staticStyle:{"background-color":"#E99D42"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.rename.apply(void 0,arguments)}}},[e._v("重命名")]),i("v-uni-button",{staticClass:"user-figure-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delVideos.apply(void 0,arguments)}}},[e._v("删除")])],1):e._e(),i("uni-popup",{ref:"popup",attrs:{type:"center","border-radius":"10px"}},[i("v-uni-view",{staticStyle:{position:"relative"}},[i("v-uni-video",{ref:"video",staticStyle:{"background-color":"#999999","border-radius":"10px"},style:{width:.8*e.safeArea.width+"px",height:.8*e.safeArea.width*4/3+"px"},attrs:{src:e.filepath,poster:e.poster,controls:!1,"show-center-play-btn":!1},on:{ended:function(t){arguments[0]=t=e.$handleEvent(t),e.isPlaying=!1}}}),e.isPlaying?e._e():i("uni-icons",{staticClass:"play-icon",attrs:{fontFamily:"CustomFont",size:"30",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.controlVideo.apply(void 0,arguments)}}},[e._v(e._s(""))])],1)],1),i("uni-popup",{ref:"inputDialog",attrs:{type:"dialog"}},[i("uni-popup-dialog",{ref:"inputClose",attrs:{mode:"input",title:"重命名形象",placeholder:"请输入内容"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.dialogInputConfirm.apply(void 0,arguments)}}})],1)],1)},o=[]},"19a4":function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{}},created:function(){this.popup=this.getParent()},methods:{getParent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniPopup",t=this.$parent,i=t.$options.name;while(i!==e){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}};t.default=n},"2b68":function(e){e.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},"344d":function(e,t,i){"use strict";i.r(t);var n=i("8ae6"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},4184:function(e){e.exports=JSON.parse('{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"}')},4476:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-popup-dialog"},[i("v-uni-view",{staticClass:"uni-dialog-title"},[i("v-uni-text",{staticClass:"uni-dialog-title-text",class:["uni-popup__"+e.dialogType]},[e._v(e._s(e.titleText))])],1),"base"===e.mode?i("v-uni-view",{staticClass:"uni-dialog-content"},[e._t("default",[i("v-uni-text",{staticClass:"uni-dialog-content-text"},[e._v(e._s(e.content))])])],2):i("v-uni-view",{staticClass:"uni-dialog-content"},[e._t("default",["checkbox"===e.inputType?i("v-uni-input",{staticClass:"uni-dialog-input",attrs:{maxlength:e.maxlength,placeholder:e.placeholderText,focus:e.focus,type:"checkbox"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"radio"===e.inputType?i("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],staticClass:"uni-dialog-input",attrs:{maxlength:e.maxlength,placeholder:e.placeholderText,focus:e.focus,type:"radio"},domProps:{checked:e._q(e.val,null)},on:{change:function(t){e.val=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],staticClass:"uni-dialog-input",attrs:{maxlength:e.maxlength,placeholder:e.placeholderText,focus:e.focus,type:e.inputType},domProps:{value:e.val},on:{input:function(t){t.target.composing||(e.val=t.target.value)}}})])],2),i("v-uni-view",{staticClass:"uni-dialog-button-group"},[e.showClose?i("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeDialog.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-dialog-button-text"},[e._v(e._s(e.closeText))])],1):e._e(),i("v-uni-view",{staticClass:"uni-dialog-button",class:e.showClose?"uni-border-left":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onOk.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[e._v(e._s(e.okText))])],1)],1)],1)},a=[]},"5abc":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("4184")),o=n(i("2b68")),u=n(i("adde")),s={en:a.default,"zh-Hans":o.default,"zh-Hant":u.default};t.default=s},"714d":function(e,t,i){"use strict";i.r(t);var n=i("1502"),a=i("a6a8");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("8d26");var u=i("828b"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"347d5f5a",null,!1,n["a"],void 0);t["default"]=s.exports},7338:function(e,t,i){"use strict";i.r(t);var n=i("4476"),a=i("344d");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("b092");var u=i("828b"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"b2d7af54",null,!1,n["a"],void 0);t["default"]=s.exports},"736a":function(e,t,i){var n=i("05cd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("1cfb6964",n,!0,{sourceMap:!1,shadowMode:!1})},"8ae6":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("64aa"),i("f7a5");var a=n(i("19a4")),o=i("d3b4"),u=n(i("5abc")),s=(0,o.initVueI18n)(u.default),r=s.t,l={name:"uniPopupDialog",mixins:[a.default],emits:["confirm","close","update:modelValue","input"],props:{inputType:{type:String,default:"text"},showClose:{type:Boolean,default:!0},value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},maxlength:{type:Number,default:-1},focus:{type:Boolean,default:!0}},data:function(){return{dialogType:"error",val:""}},computed:{okText:function(){return this.confirmText||r("uni-popup.ok")},closeText:function(){return this.cancelText||r("uni-popup.cancel")},placeholderText:function(){return this.placeholder||r("uni-popup.placeholder")},titleText:function(){return this.title||r("uni-popup.title")}},watch:{type:function(e){this.dialogType=e},mode:function(e){"input"===e&&(this.dialogType="info")},value:function(e){-1!=this.maxlength&&"input"===this.mode?this.val=e.slice(0,this.maxlength):this.val=e},val:function(e){this.$emit("input",e)}},created:function(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},methods:{onOk:function(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog:function(){this.$emit("close"),this.beforeClose||this.popup.close()},close:function(){this.popup.close()}}};t.default=l},"8d26":function(e,t,i){"use strict";var n=i("736a"),a=i.n(n);a.a},a6a8:function(e,t,i){"use strict";i.r(t);var n=i("ede4"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},adde:function(e){e.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},b092:function(e,t,i){"use strict";var n=i("c4ab"),a=i.n(n);a.a},c4ab:function(e,t,i){var n=i("117f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("021b5b89",n,!0,{sourceMap:!1,shadowMode:!1})},ede4:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("8f71"),i("bf0f"),i("bd06"),i("dd2b"),i("aa9c"),i("fd3c");var n={name:"UserFigure",data:function(){return{safeArea:uni.getSystemInfoSync().safeArea,figureWidth:0,figures:[],isManage:!1,filepath:"",poster:"",isPlaying:!1,selectedFigures:[]}},mounted:function(){this.figureWidth=(uni.getSystemInfoSync().safeArea.width-90)/3,this.queryFigures()},methods:{queryFigures:function(){var e=this;this.$http.get("/figure/query/user",{user_id:uni.getStorageSync("userId")}).then((function(t){"success"===t.status?e.figures=t.data.filter((function(e){return"clone"===e.type})):e.$tip.confirm(t.message,!1)}))},manage:function(){this.isManage=!this.isManage,this.selectedFigures=[]},manageFigure:function(e){if(this.isManage){var t=this.selectedFigures.findIndex((function(t){return t.id===e.id}));-1!==t?this.selectedFigures.splice(t,1):this.selectedFigures.push(e)}else this.poster=e.picture,this.filepath=e.filepath,this.$refs.popup.open()},rename:function(){0!==this.selectedFigures.length?this.selectedFigures.length>1?this.$tip.confirm("单次只支持重命名单个数字人，请重新选择后继续",!1):this.$refs.inputDialog.open():this.$tip.confirm("请先选择要重命名的数字人",!1)},delVideos:function(){var e=this,t=this.selectedFigures.map((function(e){return e.id}));0!==t.length?uni.showModal({title:"提示",content:"确定要删除选中的视频吗？",showCancel:!0,success:function(i){i.confirm?e.$http.del("/figure/batch_delete",{ids:t}).then((function(t){"success"===t.status?(e.selectedFigures=[],e.$tip.toast("删除成功",1e3),e.queryFigures()):e.$tip.confirm(t.message,!1)})):i.cancel&&(e.selectedFigures=[],e.$tip.toast("已取消删除",1e3))}}):this.$tip.confirm("请先选择要删除的视频",!1)},controlVideo:function(){this.$refs.video.play(),this.isPlaying=!0},dialogInputConfirm:function(e){var t=this,i={figure_id:this.selectedFigures[0].id,name:e};this.$http.put("/figure/update",i).then((function(e){"success"===e.status?(t.$tip.toast("重命名成功",1e3),t.selectedFigures=[],t.queryFigures()):t.$tip.confirm(e.message,!1)}))},back:function(){uni.switchTab({url:"/pages/user/index"})}}};t.default=n}}]);