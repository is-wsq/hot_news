(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-voiceRecharge"],{1527:function(e,t,i){"use strict";i.r(t);var a=i("d39d"),n=i.n(a);for(var c in a)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(c);t["default"]=n.a},"27f0":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return a}));var a={uniIcons:i("00f9").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"pages voice-recharge"},[i("v-uni-view",{staticClass:"nav-bar-header"},[i("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"nav-bar-title"},[e._v("声音额度充值")])],1),i("v-uni-view",{staticClass:"voice-recharge-container"},[i("v-uni-view",{staticStyle:{display:"flex",color:"#fff"}},[i("v-uni-view",{staticClass:"voice-recharge-header"},[i("v-uni-view",{staticStyle:{"line-height":"37px"}},[e._v("声音额度")]),i("v-uni-view",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.userInfo.timbreBalance))])],1),i("v-uni-view",{staticStyle:{flex:"1"}}),i("v-uni-view",{staticStyle:{"margin-top":"20px",width:"115px"}},[i("v-uni-view",{staticStyle:{display:"flex"}},[(e.userInfo.userType,i("v-uni-image",{staticClass:"vip-icon",attrs:{src:"/static/royal.png"}})),i("v-uni-view",{staticClass:"vip-type"},[e._v(e._s(e.userTypeNames.find((function(t){return t.type===e.userInfo.userType})).name))])],1),i("v-uni-view",{staticClass:"vip-desc"},[e._v(e._s(e.discounts.find((function(t){return t.type===e.userInfo.userType})).name))])],1)],1),i("v-uni-view",{staticClass:"voice-recharge-content"},[i("v-uni-view",{staticStyle:{"margin-bottom":"10px","font-size":"14px",color:"#CECECE"}},[e._v("当前会员折扣价："+e._s(e.price)+"元/个")]),i("v-uni-view",{staticClass:"voice-recharge-list"},e._l(e.recharges,(function(t){return i("v-uni-view",{key:t.id,staticClass:"voice-recharge-item",class:{"voice-recharge-active":t.id===e.selected.id},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.selected=t}}},[i("v-uni-view",[e._v(e._s(t.name))]),4!==t.id?i("v-uni-view",{staticStyle:{"font-size":"14px","margin-top":"5px"}},[e._v(e._s((e.price*t.count).toFixed(1))+"￥")]):e._e(),4===t.id&&4===e.selected.id?i("v-uni-view",{staticStyle:{"font-size":"14px","margin-top":"5px"}},[e._v(e._s((e.price*e.count).toFixed(1))+"￥")]):e._e()],1)})),1),4===e.selected.id?i("v-uni-input",{staticClass:"voice-recharge-other",attrs:{type:"number",placeholder:"输入充值数字人额度数量"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}}):i("v-uni-view",{staticStyle:{height:"64px"}}),i("v-uni-view",{staticClass:"top_up-desc"},[i("v-uni-view",{staticStyle:{"margin-bottom":"5px"}},[e._v("充值说明：")]),i("v-uni-view",[e._v("1.充值未完成时，请不要切换账户或者退出软件，请等待充值结束，否则可能会出现账户未到账的情况。若出现此类情况，请咨询客服。")]),i("v-uni-view",[e._v("2.充值成功后不可提现，如其他问题，请联系客服。")]),i("v-uni-view",[e._v("3.如特殊情况需要退款，请联系客服。")])],1)],1),i("v-uni-button",{staticClass:"buy-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getWeChatCode.apply(void 0,arguments)}}},[e._v("立即购买")]),i("v-uni-view",{staticClass:"voice-recharge-agreement"},[e._v("购买即同意"),i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/agreement/membership?back=integral")}}},[e._v("《付费服务协议》")]),e._v("、"),i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/agreement/user?back=integral")}}},[e._v("《用户协议》")]),e._v("与"),i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goto("/pages/agreement/privacy?back=integral")}}},[e._v("《隐私条款》")])],1)],1)],1)},c=[]},6661:function(e,t,i){var a=i("fc30");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("25a425b0",a,!0,{sourceMap:!1,shadowMode:!1})},"83a2":function(e,t,i){"use strict";var a=i("6661"),n=i.n(a);n.a},a5e4:function(e,t,i){"use strict";i.r(t);var a=i("27f0"),n=i("1527");for(var c in n)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(c);i("83a2");var o=i("828b"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"9dd12a04",null,!1,a["a"],void 0);t["default"]=r.exports},d39d:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("5c47"),i("0506"),i("a1c1"),i("c223"),i("23f4"),i("7d2f"),i("9c4e"),i("ab80"),i("e966");var a={data:function(){return{userInfo:{},userTypeNames:[{type:0,name:"普通用户"},{type:1,name:"月会员"},{type:2,name:"季会员"},{type:3,name:"年会员"}],discounts:[{type:0,name:""},{type:1,name:"可享9折充值优惠"},{type:2,name:"可享8折充值优惠"},{type:3,name:"可享7折充值优惠"}],recharges:[{id:1,name:"1个声音",count:1},{id:2,name:"3个声音",count:3},{id:3,name:"5个声音",count:5},{id:4,name:"其他数量"}],selected:{id:1,name:"1个声音",count:1},price:0,count:1}},onLoad:function(){this.queryUserInfo(),uni.getStorageSync("selected")&&(this.selected=uni.getStorageSync("selected"),uni.removeStorageSync("selected")),uni.getStorageSync("count")&&(this.count=uni.getStorageSync("count"),uni.removeStorageSync("count")),this.queryPackageInfo(),this.checkWeChatCode()},beforeDestroy:function(){uni.removeStorageSync("packageId")},methods:{queryPackageInfo:function(){var e=this,t={user_id:uni.getStorageSync("userId"),type:"timbre"};this.$http.get("/package/query/user",t).then((function(t){"success"===t.status?(e.price=t.data.price,uni.setStorageSync("packageId",t.data.id)):e.$tip.confirm(t.message,!1)}))},queryUserInfo:function(){var e=this;this.$http.get("/user/query",{user_id:uni.getStorageSync("userId")}).then((function(t){"success"===t.status&&(e.userInfo=t.data)}))},isWeChat:function(){return/MicroMessenger/i.test(navigator.userAgent)},getWeChatCode:function(){if(this.isWeChat()){var e=encodeURIComponent(window.location.href);uni.setStorageSync("selected",this.selected),uni.setStorageSync("count",this.count);window.location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat("wx48d2e02bf10f849c","&redirect_uri=").concat(e,"&response_type=code&scope=").concat("snsapi_base","&state=").concat("STATE123","#wechat_redirect"))}else this.$tip.confirm("需要在微信环境下才能使用",!1)},getUrlCode:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},checkWeChatCode:function(){var e=this,t=this.getUrlCode("code");if(t){var i={user_id:uni.getStorageSync("userId"),code:t,count:4===this.selected.id?parseInt(this.count):this.selected.count,package_id:uni.getStorageSync("packageId")};this.$http.post("/package/buy/balance",i).then((function(t){if("success"===t.status){var i=e;window.WeixinJSBridge.invoke("getBrandWCPayRequest",t.data,(function(e){window.history.replaceState({},"","https://tellai.tech/#/pages/user/voiceRecharge"),"get_brand_wcpay_request:ok"===e.err_msg?i.$tip.confirm("支付成功",!1).then((function(){i.queryUserInfo()})):"get_brand_wcpay_request:cancel"===e.err_msg?i.$tip.confirm("已取消支付",!1):i.$tip.confirm("支付失败",!1)}))}else window.history.replaceState({},"","https://tellai.tech/#/pages/user/voiceRecharge"),e.$tip.confirm(t.message,!1)}))}},goto:function(e){},back:function(){uni.switchTab({url:"/pages/user/index"})}}};t.default=a},fc30:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,".voice-recharge[data-v-9dd12a04]{height:100vh;color:#fff}.voice-recharge-container[data-v-9dd12a04]{height:calc(100% - 58px)}.voice-recharge-header[data-v-9dd12a04]{display:flex;flex-direction:column;align-items:center;padding:0 10px;box-sizing:border-box}.vip-icon[data-v-9dd12a04]{width:20px;height:20px;margin-right:5px}.vip-type[data-v-9dd12a04]{line-height:20px;height:20px}.vip-desc[data-v-9dd12a04]{font-size:14px;color:#af8a18;height:20px;margin-top:5px}.voice-recharge-content[data-v-9dd12a04]{height:calc(100% - 195px);min-height:400px;margin-top:10px;border-radius:15px;background:linear-gradient(180deg,rgba(233,157,66,.2),rgba(233,157,157,0));box-shadow:2px 4px 10px rgba(0,0,0,.4);padding:10px 5px 5px;box-sizing:border-box}.voice-recharge-list[data-v-9dd12a04]{display:grid;grid-template-columns:repeat(auto-fill,minmax(108px,1fr));grid-auto-rows:70px;gap:12px}.voice-recharge-item[data-v-9dd12a04]{border-radius:12px;background-color:hsla(0,0%,100%,.25);display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff}.voice-recharge-active[data-v-9dd12a04]{background-color:rgba(225,197,156,.93)!important;color:#96750e!important}.voice-recharge-other[data-v-9dd12a04]{margin-top:12px;height:50px;border:1px solid #96750e;padding-left:10px;border-radius:12px;font-size:16px}.top_up-desc[data-v-9dd12a04]{color:#cecece;margin-top:15px;padding:0 10px;box-sizing:border-box}.buy-btn[data-v-9dd12a04]{background-color:#e99d42;width:255px;height:35px;line-height:35px;margin:20px auto 0;font-size:14px;border-radius:10px;color:#101010}.voice-recharge-agreement[data-v-9dd12a04]{color:#9a9a9a;font-size:13px;margin:20px 0;display:flex;justify-content:center}",""]),e.exports=t}}]);