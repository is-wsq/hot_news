(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-previewAvatar"],{"310a":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".avatar[data-v-7b43f9fd]{padding:0!important;height:100vh;background-color:#000;box-sizing:border-box}.body[data-v-7b43f9fd]{display:flex;justify-content:center;align-items:center}.avatar-box[data-v-7b43f9fd]{background-color:#fff}.avatar-img[data-v-7b43f9fd]{width:100%;height:100%;object-fit:cover}.popup-btn[data-v-7b43f9fd]{height:58px;line-height:58px;text-align:center;border-bottom:1px solid #e6e8e7;background-color:#fff}.popup-cancel[data-v-7b43f9fd]{margin-top:10px;background-color:#fff;height:50px;line-height:50px;text-align:center}",""]),t.exports=e},"3da6":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2634")),s=i(a("2fdc")),o={data:function(){return{safeAreaHeight:uni.getSystemInfoSync().safeArea.height,safeHeight:uni.getSystemInfoSync().safeArea.height,safeWidth:uni.getSystemInfoSync().safeArea.width,userId:"",userInfo:{}}},onShow:function(){this.userId=uni.getStorageSync("userId")||"",""!==this.userId&&this.queryUserInfo()},methods:{queryUserInfo:function(){var t=this;this.$http.get("/user/query",{user_id:this.userId}).then(function(){var e=(0,s.default)((0,n.default)().mark((function e(a){return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"success"===a.status?t.userInfo=a.data:t.$tip.confirm(a.message,!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},back:function(){uni.redirectTo({url:"/pages/user/info"})},more:function(){this.$refs.popup.open("bottom")},upload:function(){var t=this;uni.chooseImage({count:1,sourceType:["album"],success:function(e){uni.uploadFile({url:"https://live.tellai.tech/api/news_assistant/user/upload_avatar",filePath:e.tempFilePaths[0],name:"file",formData:{user_id:t.userId},success:function(){t.queryUserInfo()}}),t.$refs.popup.close()}})},viewLastAvatar:function(){this.$tip.toast("暂未开放",2e3),this.$refs.popup.close()}}};e.default=o},"5b85":function(t,e,a){var i=a("310a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("34404d00",i,!0,{sourceMap:!1,shadowMode:!1})},"9dc8":function(t,e,a){"use strict";a.r(e);var i=a("d455"),n=a("f3b0");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("a946");var o=a("828b"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"7b43f9fd",null,!1,i["a"],void 0);e["default"]=r.exports},a946:function(t,e,a){"use strict";var i=a("5b85"),n=a.n(i);n.a},d455:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("00f9").default,uniPopup:a("3182").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"pages avatar"},[a("v-uni-view",{staticClass:"nav-bar-header"},[a("uni-icons",{staticStyle:{position:"absolute",left:"10px"},attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"nav-bar-title"},[t._v("头像")]),a("uni-icons",{staticStyle:{position:"absolute",right:"10px"},attrs:{type:"more-filled",size:"24",color:"#fff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.more.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"body",style:{height:t.safeHeight-85+"px"}},[a("v-uni-view",{staticClass:"avatar-box",style:{width:t.safeWidth+"px",height:t.safeWidth+"px"}},[a("v-uni-image",{staticClass:"avatar-img",attrs:{src:t.userInfo.avatar,mode:"aspectFill"}})],1)],1),a("uni-popup",{ref:"popup",attrs:{"background-color":"#F9F9F9",borderRadius:"10px 10px 0 0"}},[a("v-uni-view",{staticClass:"popup-content"},[a("v-uni-view",{staticClass:"popup-btn",staticStyle:{"border-top-left-radius":"10px","border-top-right-radius":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}},[t._v("上传头像")]),a("v-uni-view",{staticClass:"popup-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewLastAvatar.apply(void 0,arguments)}}},[t._v("查看上一张头像")]),a("v-uni-view",{staticClass:"popup-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.popup.close()}}},[t._v("取消")])],1)],1)],1)},s=[]},f3b0:function(t,e,a){"use strict";a.r(e);var i=a("3da6"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}}]);