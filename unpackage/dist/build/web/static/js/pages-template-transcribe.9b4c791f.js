(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-transcribe"],{"6f3e":function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("5ef2"),r("bf0f"),r("2797"),r("aa9c"),r("18f7"),r("de6c"),r("dc89"),r("2425"),r("c9b5"),r("ab80"),r("dd2b"),r("e838");var a={data:function(){return{status:!1,isUserMedia:!1,stream:null,audio:null,recorder:null,chunks:[],startTime:0}},beforeDestroy:function(){this.stop()},mounted:function(){if(-1===origin.indexOf("https"))throw this.$emit("error","100"),"请在 https 环境中使用本插件。";if(!navigator.mediaDevices||!window.MediaRecorder)throw this.$emit("error","101"),"当前浏览器不支持";this.getRecorderManager()},methods:{handlerSave:function(){var e=document.createElement("a");e.href=this.recorder.localUrl,e.download="录音",e.click()},getRecorderManager:function(){var e=this;this.audio=document.createElement("audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.isUserMedia=!0,t.getTracks().forEach((function(e){e.stop()}))})).catch((function(t){e.onErrorHandler(t)}))},start:function(){var e=this;if(!this.isUserMedia)return console.log("设备不支持");navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.startTime=(new Date).getTime(),e.stream=t,e.recorder=new MediaRecorder(t),e.recorder.ondataavailable=e.getRecordingData,e.recorder.onstop=e.saveRecordingData,e.recorder.start()})).catch((function(t){e.onErrorHandler(t)})),this.status=!this.status},stop:function(){this.recorder.stop(),this.stream.getTracks().forEach((function(e){e.stop()})),this.status=!this.status},getRecordingData:function(e){this.chunks.push(e.data)},saveRecordingData:function(){console.log(this.chunks);var e=new Blob(this.chunks,{type:"audio/mp3"}),t=URL.createObjectURL(e),r=(new Date).getTime(),a={path:t,lastModified:Date.now()},n=new File([e],"录音.mp3",a);console.log(n);var o=(r-this.startTime).toString().split("");o.splice(o.length-2),o.splice(o.length-1,0,"."),o=parseFloat(o.join(""));var i={data:e,duration:o,localUrl:t};this.handlerSuccess(i)},onErrorHandler:function(e){if(console.log(e),"NotAllowedError"===e.name)throw this.handlerError("201"),"用户拒绝了当前的浏览器实例的访问请求";if("NotReadableError"===e.name)throw this.handlerError("202"),"当前浏览器不支持";throw this.handlerError("500"),"调用失败，原因不详"},handlerOnCahnger:function(){this.status?this.stop():this.start()},handlerSuccess:function(e){console.log(e),this.recorder=e},handlerError:function(e){switch(e){case"101":uni.showModal({content:"当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。"});break;case"201":uni.showModal({content:"麦克风权限被拒绝，请刷新页面后授权麦克风权限。"});break;default:uni.showModal({content:"未知错误，请刷新页面重试"});break}},back:function(){uni.redirectTo({url:"/pages/template/voicesClone"})}}};t.default=a},"742d":function(e,t,r){"use strict";r.r(t);var a=r("eb03"),n=r("fbee");for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("9c56");var i=r("828b"),s=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,"21ede4fa",null,!1,a["a"],void 0);t["default"]=s.exports},"976f":function(e,t,r){var a=r("a2a7");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("967d").default;n("67b19d84",a,!0,{sourceMap:!1,shadowMode:!1})},"9c56":function(e,t,r){"use strict";var a=r("976f"),n=r.n(a);n.a},a2a7:function(e,t,r){var a=r("c86c");t=a(!1),t.push([e.i,".transcribe[data-v-21ede4fa]{height:100vh;color:#fff}",""]),e.exports=t},eb03:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a}));var a={uniIcons:r("00f9").default},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"pages transcribe"},[r("v-uni-view",{staticClass:"nav-bar-header"},[r("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"nav-bar-title"},[e._v("在线录制")])],1),r("v-uni-view",[e.recorder?r("v-uni-audio",{attrs:{src:e.recorder.localUrl,name:"本地录音",controls:"true"}}):e._e(),r("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerOnCahnger.apply(void 0,arguments)}}},[e._v(e._s(e.status?"结束录音":"开始录音"))])],1),r("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerSave.apply(void 0,arguments)}}},[e._v("保存")])],1)},o=[]},fbee:function(e,t,r){"use strict";r.r(t);var a=r("6f3e"),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a}}]);