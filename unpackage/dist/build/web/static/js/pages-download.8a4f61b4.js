(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-download"],{"117f":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.uni-popup-dialog[data-v-b2d7af54]{width:300px;border-radius:11px;background-color:#fff}.uni-dialog-title[data-v-b2d7af54]{display:flex;flex-direction:row;justify-content:center;padding-top:25px}.uni-dialog-title-text[data-v-b2d7af54]{font-size:16px;font-weight:500}.uni-dialog-content[data-v-b2d7af54]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:20px}.uni-dialog-content-text[data-v-b2d7af54]{font-size:14px;color:#6c6c6c}.uni-dialog-button-group[data-v-b2d7af54]{display:flex;flex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:1px}.uni-dialog-button[data-v-b2d7af54]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:45px}.uni-border-left[data-v-b2d7af54]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:1px}.uni-dialog-button-text[data-v-b2d7af54]{font-size:16px;color:#333}.uni-button-color[data-v-b2d7af54]{color:#007aff}.uni-dialog-input[data-v-b2d7af54]{flex:1;font-size:14px;border:1px #eee solid;height:40px;padding:0 10px;border-radius:5px;color:#555}.uni-popup__success[data-v-b2d7af54]{color:#4cd964}.uni-popup__warn[data-v-b2d7af54]{color:#f0ad4e}.uni-popup__error[data-v-b2d7af54]{color:#dd524d}.uni-popup__info[data-v-b2d7af54]{color:#909399}',""]),t.exports=e},"19a4":function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},created:function(){this.popup=this.getParent()},methods:{getParent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniPopup",e=this.$parent,n=e.$options.name;while(n!==t){if(e=e.$parent,!e)return!1;n=e.$options.name}return e}}};e.default=a},"2b68":function(t){t.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},"344d":function(t,e,n){"use strict";n.r(e);var a=n("8ae6"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},4184:function(t){t.exports=JSON.parse('{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"}')},4476:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-popup-dialog"},[n("v-uni-view",{staticClass:"uni-dialog-title"},[n("v-uni-text",{staticClass:"uni-dialog-title-text",class:["uni-popup__"+t.dialogType]},[t._v(t._s(t.titleText))])],1),"base"===t.mode?n("v-uni-view",{staticClass:"uni-dialog-content"},[t._t("default",[n("v-uni-text",{staticClass:"uni-dialog-content-text"},[t._v(t._s(t.content))])])],2):n("v-uni-view",{staticClass:"uni-dialog-content"},[t._t("default",["checkbox"===t.inputType?n("v-uni-input",{staticClass:"uni-dialog-input",attrs:{maxlength:t.maxlength,placeholder:t.placeholderText,focus:t.focus,type:"checkbox"},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}}):"radio"===t.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"uni-dialog-input",attrs:{maxlength:t.maxlength,placeholder:t.placeholderText,focus:t.focus,type:"radio"},domProps:{checked:t._q(t.val,null)},on:{change:function(e){t.val=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"uni-dialog-input",attrs:{maxlength:t.maxlength,placeholder:t.placeholderText,focus:t.focus,type:t.inputType},domProps:{value:t.val},on:{input:function(e){e.target.composing||(t.val=e.target.value)}}})])],2),n("v-uni-view",{staticClass:"uni-dialog-button-group"},[t.showClose?n("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDialog.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text"},[t._v(t._s(t.closeText))])],1):t._e(),n("v-uni-view",{staticClass:"uni-dialog-button",class:t.showClose?"uni-border-left":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onOk.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v(t._s(t.okText))])],1)],1)],1)},i=[]},"4a2d":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniIcons:n("00f9").default,uniPopup:n("3182").default,uniPopupDialog:n("7338").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"pages download",style:{height:t.safeAreaHeight+"px"}},[n("v-uni-view",{staticClass:"nav-bar-header"},[n("uni-icons",{staticClass:"nav-bar-back",attrs:{type:"left",size:"21",color:"#ffffff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"nav-bar-title"},[t._v("下载")])],1),n("v-uni-view",{staticClass:"download-container"},[n("v-uni-view",{staticClass:"download-filename"},[t._v(t._s(t.filename))]),n("v-uni-view",{staticClass:"download-preview"},[n("v-uni-video",{ref:"video",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.filepath}})],1),n("v-uni-button",{staticClass:"download-btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.download.apply(void 0,arguments)}}},[t._v("下载视频")])],1),n("uni-popup",{ref:"dialog",attrs:{type:"dialog"}},[n("uni-popup-dialog",{attrs:{type:"info",confirmText:"确定",showClose:!1,content:"微信内无法直接下载，请点击右上角'…'选择'在浏览器中打开'"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.dialog.close()}}})],1)],1)},o=[]},"5abc":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("4184")),o=a(n("2b68")),u=a(n("adde")),l={en:i.default,"zh-Hans":o.default,"zh-Hant":u.default};e.default=l},7338:function(t,e,n){"use strict";n.r(e);var a=n("4476"),i=n("344d");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("b092");var u=n("828b"),l=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"b2d7af54",null,!1,a["a"],void 0);e["default"]=l.exports},7982:function(t,e,n){"use strict";n.r(e);var a=n("fd38"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"8ae6":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("64aa"),n("f7a5");var i=a(n("19a4")),o=n("d3b4"),u=a(n("5abc")),l=(0,o.initVueI18n)(u.default),r=l.t,d={name:"uniPopupDialog",mixins:[i.default],emits:["confirm","close","update:modelValue","input"],props:{inputType:{type:String,default:"text"},showClose:{type:Boolean,default:!0},value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},maxlength:{type:Number,default:-1},focus:{type:Boolean,default:!0}},data:function(){return{dialogType:"error",val:""}},computed:{okText:function(){return this.confirmText||r("uni-popup.ok")},closeText:function(){return this.cancelText||r("uni-popup.cancel")},placeholderText:function(){return this.placeholder||r("uni-popup.placeholder")},titleText:function(){return this.title||r("uni-popup.title")}},watch:{type:function(t){this.dialogType=t},mode:function(t){"input"===t&&(this.dialogType="info")},value:function(t){-1!=this.maxlength&&"input"===this.mode?this.val=t.slice(0,this.maxlength):this.val=t},val:function(t){this.$emit("input",t)}},created:function(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},methods:{onOk:function(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog:function(){this.$emit("close"),this.beforeClose||this.popup.close()},close:function(){this.popup.close()}}};e.default=d},"8de4":function(t,e,n){"use strict";var a=n("987d"),i=n.n(a);i.a},"987d":function(t,e,n){var a=n("dd8b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("4c8f7498",a,!0,{sourceMap:!1,shadowMode:!1})},adde:function(t){t.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},b092:function(t,e,n){"use strict";var a=n("c4ab"),i=n.n(a);i.a},c4ab:function(t,e,n){var a=n("117f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("021b5b89",a,!0,{sourceMap:!1,shadowMode:!1})},dd8b:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".download-container[data-v-15a28f09]{height:calc(100% - 110px)}.download-preview[data-v-15a28f09]{height:calc(100% - 150px);width:100%}.download-filename[data-v-15a28f09]{text-align:center;font-size:18px;font-weight:700;color:#fff;margin-bottom:20px}.download-btn[data-v-15a28f09]{margin-top:50px;border-radius:10px;width:200px}",""]),t.exports=e},fd38:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("2634")),o=a(n("2fdc"));n("5c47"),n("0506"),n("a1c1"),n("bf0f"),n("7a76"),n("c9b5"),n("aa9c");var u={data:function(){return{safeAreaHeight:uni.getSystemInfoSync().safeArea.height,filename:"",filepath:"",downloadProgress:0}},onLoad:function(t){this.filename=t.filename,this.filepath=t.filepath},mounted:function(){console.log(this.isWeChat())},methods:{isWeChat:function(){return/MicroMessenger/i.test(navigator.userAgent)},download:function(){if(this.isWeChat())this.$refs.dialog.open();else{var t=document.createElement("a"),e=this.filepath.replace("results","download_v3");t.href=e+"/".concat(this.filename),t.download=this.filename+".mp4",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},downloadByStream:function(t,e){return(0,o.default)((0,i.default)().mark((function n(){var a,o,u,l,r,d,s,c;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch(t);case 2:if(a=n.sent,a.ok){n.next=5;break}throw new Error("网络请求失败");case 5:o=a.body.getReader(),u=+a.headers.get("Content-Length"),l=0,r=[];case 9:return n.next=12,o.read();case 12:if(d=n.sent,s=d.done,c=d.value,!s){n.next=17;break}return n.abrupt("break",22);case 17:r.push(c),l+=c.length,null===e||void 0===e||e(l,u),n.next=9;break;case 22:return n.abrupt("return",new Blob(r,{type:"video/mp4"}));case 23:case"end":return n.stop()}}),n)})))()},back:function(){uni.redirectTo({url:"/pages/template/videoList"})}}};e.default=u},fdfc:function(t,e,n){"use strict";n.r(e);var a=n("4a2d"),i=n("7982");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("8de4");var u=n("828b"),l=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"15a28f09",null,!1,a["a"],void 0);e["default"]=l.exports}}]);